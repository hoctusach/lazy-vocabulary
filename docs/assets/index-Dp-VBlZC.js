const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/preferences-CI6QDr5V.js","assets/ui-BFstIHNx.js","assets/vendor-BCuAxY6N.js"])))=>i.map(i=>d[i]);
`);const A=yield S.signMessage(new TextEncoder().encode(f),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=A}}try{const{data:w,error:x}=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:oj(y)},!((u=e.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:kt});if(x)throw x;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Ho}:(w.session&&(yield this._saveSession(w.session),yield this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:x})}catch(w){if(ee(w))return{data:{user:null,session:null},error:w};throw w}})}_exchangeCodeForSession(e){return T(this,null,function*(){const n=yield rn(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(n!=null?n:"").split("/");try{const{data:r,error:i}=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:kt});if(yield qt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new Ho}:(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:o!=null?o:null}),error:i})}catch(r){if(ee(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}})}signInWithIdToken(e){return T(this,null,function*(){try{const{options:n,provider:a,token:o,access_token:r,nonce:i}=e,s=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:kt}),{data:l,error:c}=s;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ho}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithOtp(e){return T(this,null,function*(){var n,a,o,r,i;try{if("email"in e){const{email:s,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=yield qn(this.storage,this.storageKey));const{error:d}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:s,options:l}=e,{data:c,error:h}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(o=l==null?void 0:l.data)!==null&&o!==void 0?o:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new Do("You must provide either an email or phone number.")}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}})}verifyOtp(e){return T(this,null,function*(){var n,a;try{let o,r;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,r=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:i,error:s}=yield oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:o,xform:kt});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithSSO(e){return T(this,null,function*(){var n,a,o;try{let r=null,i=null;return this.flowType==="pkce"&&([r,i]=yield qn(this.storage,this.storageKey)),yield oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:Sj})}catch(r){if(ee(r))return{data:null,error:r};throw r}})}reauthenticate(){return T(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return T(this,null,function*(){try{return yield this._useSession(e=>T(this,null,function*(){const{data:{session:n},error:a}=e;if(a)throw a;if(!n)throw new Mt;const{error:o}=yield oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}}))}catch(e){if(ee(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return T(this,null,function*(){try{const n=`${this.url}/resend`;if("email"in e){const{email:a,type:o,options:r}=e,{error:i}=yield oe(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:a,type:o,options:r}=e,{data:i,error:s}=yield oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:s}}throw new Do("You must provide either an email or phone number and a type")}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}})}getSession(){return T(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){return this._useSession(n=>T(this,null,function*(){return n}))}))})}_acquireLock(e,n){return T(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=T(this,null,function*(){return yield a,yield n()});return this.pendingInLock.push(T(this,null,function*(){try{yield o}catch(r){}})),o}return yield this.lock(`lock:${this.storageKey}`,e,()=>T(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push(T(this,null,function*(){try{yield a}catch(o){}})),yield a;this.pendingInLock.length;){const o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return T(this,null,function*(){this._debug("#_useSession","begin");try{const n=yield this.__loadSession();return yield e(n)}finally{this._debug("#_useSession","end")}})}__loadSession(){return T(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=yield rn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<ui:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const i=yield rn(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=pi()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,h)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,h))})}return{data:{session:e},error:null}}const{session:o,error:r}=yield this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return T(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return T(this,null,function*(){try{return e?yield oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$t}):yield this._useSession(n=>T(this,null,function*(){var a,o,r;const{data:i,error:s}=n;if(s)throw s;return!(!((a=i.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Mt}:yield oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&r!==void 0?r:void 0,xform:$t})}))}catch(n){if(ee(n))return JS(n)&&(yield this._removeSession(),yield qt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}})}updateUser(a){return T(this,arguments,function*(e,n={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){return yield this._updateUser(e,n)}))})}_updateUser(a){return T(this,arguments,function*(e,n={}){try{return yield this._useSession(o=>T(this,null,function*(){const{data:r,error:i}=o;if(i)throw i;if(!r.session)throw new Mt;const s=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=yield qn(this.storage,this.storageKey));const{data:h,error:d}=yield oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:s.access_token,xform:$t});if(d)throw d;return s.user=h.user,yield this._saveSession(s),yield this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}))}catch(o){if(ee(o))return{data:{user:null},error:o};throw o}})}setSession(e){return T(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return T(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new Mt;const n=Date.now()/1e3;let a=n,o=!0,r=null;const{payload:i}=gi(e.access_token);if(i.exp&&(a=i.exp,o=a<=n),o){const{session:s,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!s)return{data:{user:null,session:null},error:null};r=s}else{const{data:s,error:l}=yield this._getUser(e.access_token);if(l)throw l;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:a-n,expires_at:a},yield this._saveSession(r),yield this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(n){if(ee(n))return{data:{session:null,user:null},error:n};throw n}})}refreshSession(e){return T(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return T(this,null,function*(){try{return yield this._useSession(n=>T(this,null,function*(){var a;if(!e){const{data:i,error:s}=n;if(s)throw s;e=(a=i.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new Mt;const{session:o,error:r}=yield this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}}))}catch(n){if(ee(n))return{data:{user:null,session:null},error:n};throw n}})}_getSessionFromURL(e,n){return T(this,null,function*(){try{if(!Ye())throw new qo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Rc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Rc("No code detected.");const{data:k,error:b}=yield this._exchangeCodeForSession(e.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:r,refresh_token:i,expires_in:s,expires_at:l,token_type:c}=e;if(!r||!s||!i||!c)throw new qo("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(s);let u=h+d;l&&(u=parseInt(l));const m=u-h;m*1e3<=$n&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const f=u-d;h-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,h):h-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,h);const{data:y,error:w}=yield this._getUser(r);if(w)throw w;const x={provider_token:a,provider_refresh_token:o,access_token:r,expires_in:d,expires_at:u,refresh_token:i,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(a){if(ee(a))return{data:{session:null,redirectType:null},error:a};throw a}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return T(this,null,function*(){const n=yield rn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)})}signOut(){return T(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return T(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(n=>T(this,null,function*(){var a;const{data:o,error:r}=n;if(r)return{error:r};const i=(a=o.session)===null||a===void 0?void 0:a.access_token;if(i){const{error:s}=yield this.admin.signOut(i,e);if(s&&!(YS(s)&&(s.status===404||s.status===401||s.status===403)))return{error:s}}return e!=="others"&&(yield this._removeSession(),yield qt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){const n=ij(),a={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),T(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){this._emitInitialSession(n)}))}),{data:{subscription:a}}}_emitInitialSession(e){return T(this,null,function*(){return yield this._useSession(n=>T(this,null,function*(){var a,o;try{const{data:{session:r},error:i}=n;if(i)throw i;yield(a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",r),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){yield(o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}}))})}resetPasswordForEmail(a){return T(this,arguments,function*(e,n={}){let o=null,r=null;this.flowType==="pkce"&&([o,r]=yield qn(this.storage,this.storageKey,!0));try{return yield oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ee(i))return{data:null,error:i};throw i}})}getUserIdentities(){return T(this,null,function*(){var e;try{const{data:n,error:a}=yield this.getUser();if(a)throw a;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}})}linkIdentity(e){return T(this,null,function*(){var n;try{const{data:a,error:o}=yield this._useSession(r=>T(this,null,function*(){var i,s,l,c,h;const{data:d,error:u}=r;if(u)throw u;const m=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield oe(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})}));if(o)throw o;return Ye()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:e.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(ee(a))return{data:{provider:e.provider,url:null},error:a};throw a}})}unlinkIdentity(e){return T(this,null,function*(){try{return yield this._useSession(n=>T(this,null,function*(){var a,o;const{data:r,error:i}=n;if(i)throw i;return yield oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(a=r.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})}))}catch(n){if(ee(n))return{data:null,error:n};throw n}})}_refreshAccessToken(e){return T(this,null,function*(){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return yield hj(o=>T(this,null,function*(){return o>0&&(yield cj(200*Math.pow(2,o-1))),this._debug(n,"refreshing attempt",o),yield oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kt})}),(o,r)=>{const i=200*Math.pow(2,o);return r&&mi(r)&&Date.now()+i-a<$n})}catch(a){if(this._debug(n,"error",a),ee(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(n,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,n){return T(this,null,function*(){const a=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",a),Ye()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}})}_recoverAndRefresh(){return T(this,null,function*(){var e,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=yield rn(this.storage,this.storageKey);if(o&&this.userStorage){let i=yield rn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},yield Wn(this.userStorage,this.storageKey+"-user",i)),o.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:pi()}else if(o&&!o.user&&!o.user){const i=yield rn(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,yield qt(this.storage,this.storageKey+"-user"),yield Wn(this.storage,this.storageKey,o)):o.user=pi()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&(yield this._removeSession());return}const r=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ui;if(this._debug(a,`session has${r?"":" not"} expired with margin of ${ui}s`),r){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=yield this._callRefreshToken(o.refresh_token);i&&(console.error(i),mi(i)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",i),yield this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:s}=yield this._getUser(o.access_token);!s&&(i!=null&&i.user)?(o.user=i.user,yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(a,"error getting user data, skipping SIGNED_IN notification",i)}else yield this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o),console.error(o);return}finally{this._debug(a,"end")}})}_callRefreshToken(e){return T(this,null,function*(){var n,a;if(!e)throw new Mt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new zr;const{data:r,error:i}=yield this._refreshAccessToken(e);if(i)throw i;if(!r.session)throw new Mt;yield this._saveSession(r.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const s={session:r.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(r){if(this._debug(o,"error",r),ee(r)){const i={session:null,error:r};return mi(r)||(yield this._removeSession()),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(r),r}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(e,n,a=!0){return T(this,null,function*(){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:n});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(s=>T(this,null,function*(){try{yield s.callback(e,n)}catch(l){r.push(l)}}));if(yield Promise.all(i),r.length>0){for(let s=0;s<r.length;s+=1)console.error(r[s]);throw r[0]}}finally{this._debug(o,"end")}})}_saveSession(e){return T(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&(yield Wn(this.userStorage,this.storageKey+"-user",{user:n.user}));const o=Object.assign({},n);delete o.user;const r=qc(o);yield Wn(this.storage,this.storageKey,r)}else{const o=qc(n);yield Wn(this.storage,this.storageKey,o)}})}_removeSession(){return T(this,null,function*(){this._debug("#_removeSession()"),yield qt(this.storage,this.storageKey),yield qt(this.storage,this.storageKey+"-code-verifier"),yield qt(this.storage,this.storageKey+"-user"),this.userStorage&&(yield qt(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ye()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}_startAutoRefresh(){return T(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$n);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>T(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return T(this,null,function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return T(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return T(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return T(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>T(this,null,function*(){try{const e=Date.now();try{return yield this._useSession(n=>T(this,null,function*(){const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-e)/$n);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${$n}ms, refresh threshold is ${ts} ticks`),o<=ts&&(yield this._callRefreshToken(a.refresh_token))}))}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof tg)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return T(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Ye()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>T(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return T(this,null,function*(){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>T(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,n,a){return T(this,null,function*(){const o=[`provider=${encodeURIComponent(n)}`];if(a!=null&&a.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[r,i]=yield qn(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(s.toString())}if(a!=null&&a.queryParams){const r=new URLSearchParams(a.queryParams);o.push(r.toString())}return a!=null&&a.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${o.join("&")}`})}_unenroll(e){return T(this,null,function*(){try{return yield this._useSession(n=>T(this,null,function*(){var a;const{data:o,error:r}=n;return r?{data:null,error:r}:yield oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token})}))}catch(n){if(ee(n))return{data:null,error:n};throw n}})}_enroll(e){return T(this,null,function*(){try{return yield this._useSession(n=>T(this,null,function*(){var a,o;const{data:r,error:i}=n;if(i)return{data:null,error:i};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=yield oe(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(a=r==null?void 0:r.session)===null||a===void 0?void 0:a.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((o=l==null?void 0:l.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(n){if(ee(n))return{data:null,error:n};throw n}})}_verify(e){return T(this,null,function*(){return this._acquireLock(-1,()=>T(this,null,function*(){try{return yield this._useSession(n=>T(this,null,function*(){var a;const{data:o,error:r}=n;if(r)return{data:null,error:r};const{data:i,error:s}=yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token});return s?{data:null,error:s}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:s})}))}catch(n){if(ee(n))return{data:null,error:n};throw n}}))})}_challenge(e){return T(this,null,function*(){return this._acquireLock(-1,()=>T(this,null,function*(){try{return yield this._useSession(n=>T(this,null,function*(){var a;const{data:o,error:r}=n;return r?{data:null,error:r}:yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token})}))}catch(n){if(ee(n))return{data:null,error:n};throw n}}))})}_challengeAndVerify(e){return T(this,null,function*(){const{data:n,error:a}=yield this._challenge({factorId:e.factorId});return a?{data:null,error:a}:yield this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})})}_listFactors(){return T(this,null,function*(){const{data:{user:e},error:n}=yield this.getUser();if(n)return{data:null,error:n};const a=(e==null?void 0:e.factors)||[],o=a.filter(i=>i.factor_type==="totp"&&i.status==="verified"),r=a.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:a,totp:o,phone:r},error:null}})}_getAuthenticatorAssuranceLevel(){return T(this,null,function*(){return this._acquireLock(-1,()=>T(this,null,function*(){return yield this._useSession(e=>T(this,null,function*(){var n,a;const{data:{session:o},error:r}=e;if(r)return{data:null,error:r};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=gi(o.access_token);let s=null;i.aal&&(s=i.aal);let l=s;((a=(n=o.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(l="aal2");const h=i.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}))})}fetchJwk(a){return T(this,arguments,function*(e,n={keys:[]}){let o=n.keys.find(l=>l.kid===e);if(o)return o;const r=Date.now();if(o=this.jwks.keys.find(l=>l.kid===e),o&&this.jwks_cached_at+GS>r)return o;const{data:i,error:s}=yield oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,o=i.keys.find(l=>l.kid===e),!o)?null:o})}getClaims(a){return T(this,arguments,function*(e,n={}){try{let o=e;if(!o){const{data:f,error:y}=yield this.getSession();if(y||!f.session)return{data:null,error:y};o=f.session.access_token}const{header:r,payload:i,signature:s,raw:{header:l,payload:c}}=gi(o);n!=null&&n.allowExpired||wj(i.exp);const h=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:f}=yield this.getUser(o);if(f)throw f;return{data:{claims:i,header:r,signature:s},error:null}}const d=yj(r.alg),u=yield crypto.subtle.importKey("jwk",h,d,!0,["verify"]);if(!(yield crypto.subtle.verify(d,u,s,aj(`${l}.${c}`))))throw new os("Invalid JWT signature");return{data:{claims:i,header:r,signature:s},error:null}}catch(o){if(ee(o))return{data:null,error:o};throw o}})}}eo.nextInstanceID=0;const Nj=eo;class Hj extends Nj{constructor(e){super(e)}}var Dj=function(t,e,n,a){function o(r){return r instanceof n?r:new n(function(i){i(r)})}return new(n||(n=Promise))(function(r,i){function s(h){try{c(a.next(h))}catch(d){i(d)}}function l(h){try{c(a.throw(h))}catch(d){i(d)}}function c(h){h.done?r(h.value):o(h.value).then(s,l)}c((a=a.apply(t,e||[])).next())})};class qj{constructor(e,n,a){var o,r,i;this.supabaseUrl=e,this.supabaseKey=n;const s=WS(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const l=`sb-${s.hostname.split(".")[0]}-auth-token`,c={db:RS,realtime:NS,auth:Object.assign(Object.assign({},OS),{storageKey:l}),global:PS},h=$S(a!=null?a:{},c);this.storageKey=(o=h.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(r=h.global.headers)!==null&&r!==void 0?r:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,u)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(u)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=h.auth)!==null&&i!==void 0?i:{},this.headers,h.global.fetch),this.fetch=LS(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new QT(new URL("rest/v1",s).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new AS(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new IT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},a={}){return this.rest.rpc(e,n,a)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Dj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(n=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:a,storage:o,userStorage:r,storageKey:i,flowType:s,lock:l,debug:c},h,d){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hj({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),h),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:a,storage:o,userStorage:r,flowType:s,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new pS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(e,n,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Lj=(t,e,n)=>new qj(t,e,n);function Mj(){if(typeof window!="undefined"||typeof process=="undefined")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Mj()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");function zj(t){const e=t.split(".");return e.length===3&&e.every(n=>n.length>0)}function $j(){var o,r;const t=jT(),e=(o=t.Authorization)!=null?o:t.authorization,n=e==null?void 0:e.trim();if(!n)return null;const a=(r=n.split(/\s+/).slice(-1)[0])!=null?r:"";return zj(a)?n:null}const Wj=(t,e={})=>{var o;const n=$j();if(!n)return fetch(t,e);const a=new Headers((o=e.headers)!=null?o:{});return a.has("authorization")||a.set("Authorization",n),fetch(t,E(v({},e),{headers:a}))};let Lo=null;function tn(){if(Lo)return Lo;const{url:t,anon:e}=aT();if(!t||!e)throw console.error("[Supabase] Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY"),new Error("Supabase env vars missing");if(!e.startsWith("eyJ"))throw console.error("[Supabase] VITE_SUPABASE_ANON_KEY does not look like a JWT (should start with eyJ…)"),new Error("Invalid anon key");return Lo=Lj(t,e,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1},global:{fetch:Wj}}),Lo}const Kt=3261;function rs(t){try{return typeof localStorage!="undefined"?localStorage.getItem(t):null}catch(e){return null}}function ng(t,e){try{typeof localStorage!="undefined"&&localStorage.setItem(t,e)}catch(n){}}const Fj=["status","isLearned","reviewCount","mark_learned_at","srs_state"];function dn(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function Uj(){const t=rs("learningProgress");if(!t)return{};try{const e=JSON.parse(t);return dn(e)?e:{}}catch(e){return{}}}function ag(t){const e=Uj(),n=Object.entries(e);if(n.length>0&&e[t]===void 0&&n.every(([,s])=>dn(s)?Object.keys(s).some(c=>Fj.includes(c)):!1)){const s=n.reduce((l,[c,h])=>(dn(h)&&(l[c]=v({},h)),l),{});return{state:{},userProgress:s}}const o=n.reduce((s,[l,c])=>(dn(c)&&(s[l]=v({},c)),s),{}),r=Object.prototype.hasOwnProperty.call(o,t)?o[t]:void 0,i=dn(r)?v({},r):{};return{state:o,userProgress:i}}function og(t,e,n){try{const a=E(v({},e),{[t]:n});ng("learningProgress",JSON.stringify(a))}catch(a){console.warn("learningProgress:persist",a)}}function xa(){return T(this,null,function*(){var s,l,c,h,d;const t=((s=rs("lazyVoca.userKey"))!=null?s:"").trim();if(t)return t;const e=((l=rs("lazyVoca.nickname"))!=null?l:"").trim(),n=yield Hr(),a=(c=n==null?void 0:n.nickname)!=null&&c.trim().length?n.nickname:e,o=a?vn(a):"",r=(d=(h=n==null?void 0:n.user_unique_key)==null?void 0:h.trim())!=null?d:"",i=o||(r?vn(r):"");return i?(ng("lazyVoca.userKey",i),_m(i),i):null})}function Bj(t,e){return T(this,null,function*(){var d,u,m,f;const n=yield Hr();if(!(n!=null&&n.user_unique_key))return null;const a=yield xa();if(!a)return null;const o=tn();if(!o)return null;const r=y=>{if(!y)return null;const w=Date.parse(y);return Number.isNaN(w)?null:new Date(w).toISOString()},i={user_unique_key:a,word_id:t},{data:s,error:l}=yield o.rpc("mark_word_learned_by_key",i);if(l)return console.warn("mark_word_learned_by_key",l.message),null;const h=(Array.isArray(s)?s:[]).map(y=>Vj(y)).filter(y=>y!==null);if(h.length===0)return[];try{const{state:y,userProgress:w}=ag(i.user_unique_key);let x=!1;const k=(d=r(e==null?void 0:e.learned_at))!=null?d:new Date().toISOString();for(const b of h){const S=typeof b.word_id=="string"?b.word_id:"";if(!S||((u=b.srs_state)!=null?u:"").toLowerCase()!=="learned")continue;const j=w[S],A=dn(j)?v({},j):{};A.srs_state="learned",A.mark_learned_at=(f=(m=r(b.learned_at))!=null?m:r(b.last_review_at))!=null?f:k,w[S]=A,x=!0}x&&og(i.user_unique_key,y,w)}catch(y){console.warn("mark_word_learned_by_key:local_sync",y)}return h})}function Vj(t){if(!dn(t))return null;const e=n=>typeof n=="number"&&Number.isFinite(n)?n:null;return{word_id:typeof t.word_id=="string"?t.word_id:null,srs_state:typeof t.srs_state=="string"?t.srs_state:null,learned_at:typeof t.learned_at=="string"?t.learned_at:null,mark_learned_at:typeof t.mark_learned_at=="string"?t.mark_learned_at:null,last_review_at:typeof t.last_review_at=="string"?t.last_review_at:null,next_review_at:typeof t.next_review_at=="string"?t.next_review_at:null,next_display_at:typeof t.next_display_at=="string"?t.next_display_at:null,in_review_queue:typeof t.in_review_queue=="boolean"?t.in_review_queue:null,review_count:e(t.review_count),srs_interval_days:e(t.srs_interval_days),srs_ease:e(t.srs_ease),is_today_selection:typeof t.is_today_selection=="boolean"?t.is_today_selection:null,due_selected_today:typeof t.due_selected_today=="boolean"?t.due_selected_today:null,category:typeof t.category=="string"?t.category:null,word:typeof t.word=="string"?t.word:null}}function rg(){return T(this,null,function*(){var c,h;const t=yield Hr();if(!(t!=null&&t.user_unique_key))return;const e=yield xa();if(!e)return;const n=tn();if(!n)return;const{data:a,error:o}=yield n.from("learned_words").select("word_id").eq("user_unique_key",e);if(o){console.warn("bootstrapLearnedFromServerByKey",o.message);return}const r=Array.isArray(a)?a:[],{state:i,userProgress:s}=ag(e),l=new Date().toISOString();for(const d of r){const u=typeof(d==null?void 0:d.word_id)=="string"?d.word_id:"";if(!u)continue;const m=s[u]||{},f=Number((h=(c=m.status)!=null?c:m.status_value)!=null?h:0),y=Number.isFinite(f)?f:0;s[u]=E(v({},m),{status:Math.max(3,y),isLearned:!0,learned_at:m.learned_at||l})}og(e,i,s)})}function ig(t,e){return[...t].sort((a,o)=>a.is_due!==o.is_due?a.is_due?-1:1:a.word.localeCompare(o.word))}const Wc=new Map;function sg(t){let e=Wc.get(t);return e||(e=new Intl.DateTimeFormat("en-CA",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}),Wc.set(t,e)),e}function lg(t){if(typeof t!="string")return null;const e=t.trim();if(!e)return null;try{return sg(e),e}catch(n){return null}}function wi(){try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return lg(t)}catch(t){return null}}function ha(t,e){var n,a,o;if(e)try{const r=sg(e).formatToParts(t),i=(n=r.find(c=>c.type==="year"))==null?void 0:n.value,s=(a=r.find(c=>c.type==="month"))==null?void 0:a.value,l=(o=r.find(c=>c.type==="day"))==null?void 0:o.value;if(i&&s&&l)return`${i}-${s}-${l}`}catch(r){}return t.toISOString().slice(0,10)}function Gj(t,e){if(!t)return null;const n=t.trim();if(!n)return null;const a=Date.parse(n);return Number.isNaN(a)?null:ha(new Date(a),e)}function Gt(t){if(!t)return null;const e=t.trim();if(!e)return null;const n=Date.parse(e);return Number.isNaN(n)?null:new Date(n).toISOString()}function Kj(t,e,n){const a=Gt(t);if(!a)return!1;const o=Gj(a,n);return o?o===ha(e,n):!1}function Fc(t,e){const n=Gt(t.next_review_at);if(!n)return!1;const a=Date.parse(n);return Number.isNaN(a)?!1:a<=e.getTime()}function cg(t){const e=typeof(t==null?void 0:t.word_id)=="string"?t.word_id:"",n=typeof(t==null?void 0:t.category)=="string"&&t.category.trim().length>0?t.category.trim():"",a=typeof(t==null?void 0:t.word)=="string"?t.word.trim():"",o=e.split("::").map(l=>l.trim()).filter(l=>l.length>0);if(o.length===0)return a?{word:a,category:n||void 0}:null;let r=o[0],i=o.length>1?o.slice(1).join("::"):"";return n&&o[0].toLowerCase()===n.toLowerCase()&&(r=o[o.length-1],i=n),{word:r||a||e,category:i||n||void 0}}function Yj(t){var a,o,r,i;const e=cg(t);if(!e)return null;const n=(i=(r=(o=(a=Gt(t.mark_learned_at))!=null?a:Gt(t.learned_at))!=null?o:Gt(t.last_review_at))!=null?r:Gt(t.next_review_at))!=null?i:void 0;return E(v({},e),{learnedDate:n})}function Uc(t,e){var i,s;const n=cg(t);if(!n)return null;const a=(i=Gt(t.last_review_at))!=null?i:void 0,o=(s=Gt(t.next_review_at))!=null?s:void 0,r=typeof t.review_count=="number"?t.review_count:void 0;return E(v({},n),{lastReviewedAt:a,nextReviewAt:o,reviewCount:r,dueSelectedToday:e})}function $a(t,e={}){var y,w,x;const n=(y=e.now)!=null?y:new Date,a=Math.max((w=e.totalWords)!=null?w:0,0),o=Array.isArray(t)?t:[],r=o.filter(k=>{var b;return((b=k==null?void 0:k.srs_state)!=null?b:"").toLowerCase()==="learned"}),i=o.filter(k=>{var b;return((b=k==null?void 0:k.srs_state)!=null?b:"").toLowerCase()==="learning"}),s=i.filter(k=>Fc(k,n)),l=(x=e.timezone)!=null?x:null,c=k=>(k==null?void 0:k.is_today_selection)!==null&&(k==null?void 0:k.is_today_selection)!==void 0?!!k.is_today_selection:Kj(k.last_review_at,n,l),h=k=>(k==null?void 0:k.due_selected_today)!==null&&(k==null?void 0:k.due_selected_today)!==void 0?!!k.due_selected_today:Fc(k,n),d=o.filter(k=>c(k)&&!h(k)).map(k=>Uc(k,!1)).filter(k=>k!==null),u=o.filter(k=>c(k)&&h(k)).map(k=>Uc(k,!0)).filter(k=>k!==null),m=r.map(Yj).filter(k=>k!==null);r.length,i.length;const f={learned:r.length,learning:i.length,new:Math.max(a-i.length,0),due:s.length,remaining:Math.max(a-r.length-i.length,0)};return{learnedWords:m,newTodayWords:d,dueTodayWords:u,summary:f}}var kn={};const Bc={light:{min:15,max:25},moderate:{min:30,max:50},intense:{min:50,max:100}},Wa=[1,2,3,5,7,10,14,21,28,35],Jj=60,Vc=[0,5,7,10,15,30,60,90,120],Xj=180,is=or,Gc=rr;function Qj(t){var n,a;if(typeof localStorage=="undefined")return;if(!t||!t.selection){try{localStorage.removeItem(sa),localStorage.removeItem(is),localStorage.removeItem(la),localStorage.removeItem(Gc)}catch(o){console.warn("[LearningProgress] Failed to clear today selection cache",o)}return}const e=t.date||ha(new Date,(n=t.timezone)!=null?n:null);try{const o=JSON.stringify(t.selection);localStorage.setItem(sa,o),localStorage.setItem(is,o),localStorage.setItem(la,JSON.stringify((a=t.words)!=null?a:[])),localStorage.setItem(Js,e),localStorage.setItem(Gc,e)}catch(o){console.warn("[LearningProgress] Failed to persist today selection cache",o)}}function hg(){var t;if(typeof localStorage=="undefined")return!1;try{const e=(t=localStorage.getItem(is))!=null?t:localStorage.getItem(sa),n=localStorage.getItem(la);return!!(e&&n)}catch(e){return!1}}const Zj={Light:"light",Medium:"moderate",Hard:"intense"},ul={light:"Light",moderate:"Medium",intense:"Hard"},yi=new Map;function ml(t){return T(this,null,function*(){var n;if(!t)return wi();if(yi.has(t))return(n=yi.get(t))!=null?n:null;let e=null;try{const a=tn(),{data:o,error:r}=yield a.from("nicknames").select("timezone").eq("user_unique_key",t).maybeSingle();r&&console.warn("[LearningProgress] Failed to fetch user timezone",r.message);const i=lg(o==null?void 0:o.timezone);e=i!=null?i:wi()}catch(a){console.warn("[LearningProgress] Unable to resolve user timezone",a),e=wi()}return yi.set(t,e!=null?e:null),e!=null?e:null})}function Kn(t,e=null){return ha(t,e)}function e_(t){if(!t)return null;const e=t.trim();if(!e)return null;if(e.includes("T")){const o=Date.parse(e);return Number.isNaN(o)?null:new Date(o).toISOString()}const n=`${e}T00:00:00.000Z`,a=Date.parse(n);return Number.isNaN(a)?null:new Date(a).toISOString()}function t_(t,e){if(!t||!e)return null;const n=Date.parse(t),a=Date.parse(e);if(Number.isNaN(n)||Number.isNaN(a))return null;const o=Math.max(0,a-n);return Math.round(o/864e5)}function dg(t){var a;if(!t)return!1;const e=(a=t.next_review_at)!=null?a:t.next_display_at;if(!e)return!1;const n=Date.parse(e);return Number.isNaN(n)?!1:n<=Date.now()}function Kc(t){var n,a;return t?t.in_review_queue===!1||((n=t.review_count)!=null?n:0)>=Wa.length+1?!0:((a=t.srs_state)!=null?a:"").toLowerCase()==="learned":!1}function n_(t){var e;return!t||t.in_review_queue===!1?!1:((e=t.review_count)!=null?e:0)>0||dg(t)}function ug(t,e,n){return!n||t===0?"new":e?dg({next_review_at:e})?"due":t>=Wa.length+1?"learned":"not_due":"learned"}function a_(t){switch(t){case"due":return"review";case"learned":return"learned";case"not_due":return"learning";default:return"new"}}function o_(t){return!(t==="learned"||t==="new")}function r_(t){return(t!=null?t:"").trim()||"general"}function mg(t){var a;const e=t.split("::");return((a=e[e.length-1])==null?void 0:a.trim())||t}function gl(t){var n;return((n=Bc[t])!=null?n:Bc.light).max}function i_(t){var a,o,r,i,s,l,c,h,d,u;if(!t)return;const e={in_review_queue:(a=t.in_review_queue)!=null?a:void 0,review_count:(o=t.review_count)!=null?o:void 0,learned_at:(r=t.learned_at)!=null?r:void 0,last_review_at:(i=t.last_review_at)!=null?i:void 0,next_review_at:(s=t.next_review_at)!=null?s:void 0,next_display_at:(l=t.next_display_at)!=null?l:void 0,last_seen_at:(c=t.last_seen_at)!=null?c:void 0,srs_interval_days:(h=t.srs_interval_days)!=null?h:void 0,srs_ease:(d=t.srs_ease)!=null?d:void 0,srs_state:(u=t.srs_state)!=null?u:void 0};return Object.values(e).some(m=>m!=null)?e:void 0}function s_(t,e){var d,u,m,f,y,w,x,k,b,S,j,A,P;if(!(t!=null&&t.word_id))return null;const n=i_(t),a=(u=(d=t.word)!=null?d:e==null?void 0:e.word)!=null?u:mg(t.word_id),o=(f=(m=t.meaning)!=null?m:e==null?void 0:e.meaning)!=null?f:"",r=(w=(y=t.example)!=null?y:e==null?void 0:e.example)!=null?w:"",i=(k=(x=t.translation)!=null?x:e==null?void 0:e.translation)!=null?k:null,s=(b=e==null?void 0:e.count)!=null?b:0,l=(j=(S=t.category)!=null?S:e==null?void 0:e.category)!=null?j:null,h=((A=t.is_today_selection)!=null?A:!0)&&!!t.due_selected_today||n_(n);return{word_id:t.word_id,word:a,meaning:o,example:r,translation:i!=null?i:void 0,count:s,category:r_(l!=null?l:void 0),is_due:h,nextAllowedTime:(P=n==null?void 0:n.next_display_at)!=null?P:void 0,srs:n}}function gg(t,e){var l,c,h,d,u,m;const n=(l=t.srs)!=null?l:void 0,a=(c=n==null?void 0:n.review_count)!=null?c:0,o=(h=n==null?void 0:n.learned_at)!=null?h:null,r=(d=n==null?void 0:n.next_review_at)!=null?d:null,i=r?Kn(new Date(r),e):"",s=ug(a,r!=null?r:"",Kc(n));return{word:t.word,type:void 0,category:t.category,isLearned:Kc(n),reviewCount:a,lastPlayedDate:(u=n==null?void 0:n.last_review_at)!=null?u:"",status:s,nextReviewDate:i,createdDate:Kn(o?new Date(o):new Date,e),learnedDate:o!=null?o:void 0,nextAllowedTime:(m=n==null?void 0:n.next_display_at)!=null?m:void 0}}function pg(t,e,n){var i,s;const a=[],o=[];let r=0;for(const l of t){const c=gg(l,n.timezone);c.isDue=l.is_due,(l.is_due?a:o).push(c),l.is_due&&(r+=1)}return{reviewWords:a,newWords:o,totalCount:a.length+o.length,dueCount:r,severity:e,date:n?Kn(new Date,n.timezone):void 0,mode:n.mode,count:n.count,category:(i=n.category)!=null?i:null,timezone:(s=n.timezone)!=null?s:null}}function l_(t,e){const n=Math.max(0,Math.min(t-1,Wa.length-1)),a=t>Wa.length?Jj:Wa[n],o=new Date(e);return o.setDate(o.getDate()+a),Kn(o)}function c_(t,e){const n=Math.max(0,t-1),a=n<Vc.length?Vc[n]:Xj;return new Date(e.getTime()+a*6e4).toISOString()}function h_(t,e,n,a,o,r){var l,c,h,d;const i=(c=(l=t.srs)==null?void 0:l.learned_at)!=null?c:r;return{in_review_queue:o_(n),review_count:e,learned_at:i,last_review_at:r,next_review_at:a,next_display_at:o,last_seen_at:r,srs_interval_days:t_(i,a!=null?a:void 0),srs_ease:(d=(h=t.srs)==null?void 0:h.srs_ease)!=null?d:2.5,srs_state:a_(n)}}function d_(t){var h,d;const e=new Date,n=((d=(h=t.srs)==null?void 0:h.review_count)!=null?d:0)+1,a=l_(n,e),o=e_(a),r=c_(n,e),i=e.toISOString(),s=ug(n,o!=null?o:"",!0),l=h_(t,n,s,o,r,i),c=E(v({},t),{is_due:!1,nextAllowedTime:r,srs:{in_review_queue:l.in_review_queue,review_count:n,learned_at:l.learned_at,last_review_at:l.last_review_at,next_review_at:l.next_review_at,next_display_at:l.next_display_at,last_seen_at:l.last_seen_at,srs_interval_days:l.srs_interval_days,srs_ease:l.srs_ease,srs_state:l.srs_state}});return{updated:c,payload:l,progress:gg(c)}}function u_(t,e,n){var d,u,m;const a=Kn(new Date,n.timezone),o=Array.isArray(e)?e:[],r=Array.isArray(t)?t:[],i=new Map;for(const f of r)f!=null&&f.word_id&&i.set(f.word_id,f);const s=[];for(const f of o){if(!(f!=null&&f.word_id)||f.is_today_selection===!1)continue;const y=i.get(f.word_id),w=s_(f,y);w&&s.push(w)}const l=ig(s),c=(d=Zj[n.mode])!=null?d:"light",h=pg(l,c,n);return h.date=a,{date:a,mode:n.mode,count:n.count,category:(u=n.category)!=null?u:null,timezone:(m=n.timezone)!=null?m:null,words:l,selection:h}}function m_(t,e,n,a){return T(this,null,function*(){const o=tn();if(!o)throw new Error("Supabase client unavailable");const r=yield oT(o,{userKey:t,count:n,category:a!=null?a:null});return kn.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[LearningProgress] getDailySelectionV2 raw payload",r),r})}function g_(t){return T(this,null,function*(){if(t.length===0)return{};const e=tn();if(!e)throw new Error("Supabase client unavailable");const{data:n,error:a}=yield e.rpc("fetch_vocabulary_by_ids",{p_ids:t});if(a)throw new Error(a.message);const o=Array.isArray(n)?n:[],r={};for(const i of o){if(!i)continue;const s=typeof i.word_id=="string"&&i.word_id.length>0?i.word_id:null,l=typeof i.word=="string"&&i.word.length>0?i.word:null,c=s!=null?s:l;if(!c)continue;const h=E(v({},i),{word_id:s!=null?s:c,word:l!=null?l:c});r[h.word_id]=h,h.word!==h.word_id&&(r[h.word]=h)}return r})}function to(t){return T(this,null,function*(){const{userKey:e,mode:n,count:a,category:o=null}=t,[r,i]=yield Promise.all([m_(e,n,a,o),ml(e)]);if(!Array.isArray(r)||r.length===0)throw new Error("No daily selection rows returned");const s=new Map(r.filter(u=>typeof(u==null?void 0:u.word_id)=="string"&&u.word_id.length>0&&u.is_today_selection!==!1).map(u=>[u.word_id,u])),l=Array.from(s.keys());kn.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[LearningProgress] fetchAndCommitTodaySelection rpc result",{generatedCount:r.length});const c=yield g_(l),h=l.map(u=>{var w,x,k,b,S,j,A,P,I,M,N;const m=s.get(u),f=c[u];return!m&&!f?null:E(v({},f!=null?f:{}),{word_id:u,word:(x=(w=m==null?void 0:m.word)!=null?w:f==null?void 0:f.word)!=null?x:mg(u),meaning:(b=(k=m==null?void 0:m.meaning)!=null?k:f==null?void 0:f.meaning)!=null?b:"",example:(j=(S=m==null?void 0:m.example)!=null?S:f==null?void 0:f.example)!=null?j:"",translation:(P=(A=m==null?void 0:m.translation)!=null?A:f==null?void 0:f.translation)!=null?P:null,category:(M=(I=m==null?void 0:m.category)!=null?I:f==null?void 0:f.category)!=null?M:null,count:(N=f==null?void 0:f.count)!=null?N:0})}).filter(u=>!!u);if(h.length===0)throw new Error("No vocabulary details available for selection");const d=u_(h,r,{mode:n,count:a,category:o!=null?o:null,timezone:i!=null?i:null});return kn.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&(console.log("[Normalized TodayWords]",d.words),console.log("[LearningProgress] fetchAndCommitTodaySelection vocab details",{words:d.words.map(u=>({word_id:u.word_id,category:u.category,word:u.word}))})),kn.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[LearningProgress] fetchAndCommitTodaySelection final selection",{selectionSize:d.words.length}),Qj(d),d})}function fg(t,e,n,a){return T(this,null,function*(){return kn.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[LearningProgress] getOrCreateTodayWords fetching selection",{category:a,planSize:n}),to({userKey:t,mode:e,count:n,category:a!=null?a:null})})}function wg(){return T(this,null,function*(){const t=yield xa();return kn.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[LearningProgress] prepareUserSession resolved",{userKey:t}),t||null})}function yg(t,e,n,a){return T(this,null,function*(){var x,k,b,S;const o=a.words.findIndex(j=>j.word_id===e);if(o===-1)throw new Error("Word not found in today cache");const{updated:r,payload:i,progress:s}=d_(a.words[o]),l=[...a.words];l[o]=r;const c=(x=ul[n])!=null?x:a.mode,h=gl(n),d=pg(l,n,{mode:c,count:h,category:a.category,timezone:a.timezone});d.date=(k=a.selection.date)!=null?k:a.date,d.timezone=(S=(b=a.selection.timezone)!=null?b:a.timezone)!=null?S:null;const u=yield Bj(e,i);let m=null,f=null,y=null,w=null;if(u){const{learnedWords:j,newTodayWords:A,dueTodayWords:P,summary:I}=$a(u,{totalWords:Kt,timezone:a.timezone});m=I,f=j,y=A,w=P}return{words:l,selection:d,payload:i,progress:s,summary:m,learnedWords:f,newTodayWords:y,dueTodayWords:w}})}function vg(t,e){return T(this,null,function*(){if(!t||!e)return null;const n=tn();if(!n)return null;const a=yield ml(t);try{const{data:o,error:r}=yield n.rpc("mark_word_new_by_key",{p_user_key:t,word_id:e});if(r)return console.warn("[LearningProgress] Failed to reset learned word",r.message),null;const i=Array.isArray(o)?o.map(d=>pl(d)).filter(d=>d!==null):[];bg(i);const{learnedWords:s,newTodayWords:l,dueTodayWords:c,summary:h}=$a(i,{totalWords:Kt,timezone:a});return{learnedWords:s,newTodayWords:l,dueTodayWords:c,summary:h}}catch(o){return console.warn("[LearningProgress] markWordAsNew RPC failed",o),null}})}const p_=t=>typeof t=="object"&&t!==null&&!Array.isArray(t);function pl(t){if(!p_(t))return null;const e=n=>typeof n=="number"&&Number.isFinite(n)?n:null;return{word_id:typeof t.word_id=="string"?t.word_id:null,srs_state:typeof t.srs_state=="string"?t.srs_state:null,learned_at:typeof t.learned_at=="string"?t.learned_at:null,mark_learned_at:typeof t.mark_learned_at=="string"?t.mark_learned_at:null,last_review_at:typeof t.last_review_at=="string"?t.last_review_at:null,next_review_at:typeof t.next_review_at=="string"?t.next_review_at:null,next_display_at:typeof t.next_display_at=="string"?t.next_display_at:null,in_review_queue:typeof t.in_review_queue=="boolean"?t.in_review_queue:null,review_count:e(t.review_count),srs_interval_days:e(t.srs_interval_days),srs_ease:e(t.srs_ease),is_today_selection:typeof t.is_today_selection=="boolean"?t.is_today_selection:null,due_selected_today:typeof t.due_selected_today=="boolean"?t.due_selected_today:null,category:typeof t.category=="string"?t.category:null,word:typeof t.word=="string"?t.word:null}}function Yc(){if(typeof localStorage=="undefined")return null;try{const t=localStorage.getItem(Xs);if(!t)return null;const e=JSON.parse(t);if(!Array.isArray(e))return null;const n=e.map(a=>pl(a)).filter(a=>a!==null);return n.length>0?n:[]}catch(t){return console.warn("[LearningProgress] Failed to read learned words cache",t),null}}function bg(t){if(typeof localStorage!="undefined")try{localStorage.setItem(Xs,JSON.stringify(t))}catch(e){console.warn("[LearningProgress] Failed to persist learned words cache",e)}}function xg(t){return T(this,null,function*(){if(!t)return null;const e=yield ml(t),n=tn();if(!n){const i=Yc();return i?$a(i,{totalWords:Kt,timezone:e}):null}const{data:a,error:o}=yield n.from("learned_words").select("*").eq("user_unique_key",t).order("learned_at",{ascending:!1});if(o){console.warn("[LearningProgress] Failed to fetch learned words",o.message);const i=Yc();return i?$a(i,{totalWords:Kt,timezone:e}):null}const r=Array.isArray(a)?a.map(i=>pl(i)).filter(i=>i!==null):[];return bg(r),$a(r,{totalWords:Kt,timezone:e})})}function kg(t){return T(this,null,function*(){var n;const e=yield xg(t);return(n=e==null?void 0:e.summary)!=null?n:null})}function Tg(t){return T(this,null,function*(){const e=yield xg(t);if(!e)return{learnedWords:[],newTodayWords:[],dueTodayWords:[],summary:null};const{learnedWords:n,newTodayWords:a,dueTodayWords:o,summary:r}=e;return kn.DEBUG_PROGRESS&&console.debug("[LearningProgress] Learned summary debug",{totalRows:r.learned+r.learning,summary:r,newToday:a,dueToday:o}),{learnedWords:n,newTodayWords:a,dueTodayWords:o,summary:r}})}function f_(t,e,n){return T(this,null,function*(){var r;const a=(r=ul[e])!=null?r:"Light",o=gl(e);return to({userKey:t,mode:a,count:o,category:n!=null?n:null})})}function Na(t){var e;return(e=ul[t])!=null?e:"Light"}function Ha(t){return gl(t)}const w_=Object.freeze(Object.defineProperty({__proto__:null,fetchAndCommitTodaySelection:to,fetchLearnedWordSummaries:Tg,fetchProgressSummary:kg,getCountForSeverity:Ha,getModeForSeverity:Na,getOrCreateTodayWords:fg,hasCachedTodaySelection:hg,markWordAsNew:vg,markWordReviewed:yg,prepareUserSession:wg,regenerateTodaySelection:f_},Symbol.toStringTag,{value:"Module"})),y_=/Mobile|Android|iP(ad|hone|od)/i;function v_(t){return/Windows/i.test(t)?"Windows":/Mac OS X/i.test(t)?"Mac":/Android/i.test(t)?"Android":/(iPhone|iPad|iPod)/i.test(t)?"iOS":/Linux/i.test(t)?"Linux":"Unknown"}function fl(){if(typeof navigator=="undefined")return{os:"Unknown",type:"Desktop"};const t=navigator.userAgent||"",e=v_(t),n=y_.test(t)?"Mobile":"Desktop";return{os:e,type:n}}const b_="G-HQ5Q01TG2L";let gr=0;function ka(){return typeof window!="undefined"&&typeof window.gtag=="function"&&!0}function Ko(t){return Object.entries(t).reduce((e,[n,a])=>(a==null||typeof a=="number"&&!Number.isFinite(a)||(e[n]=a),e),{})}function $r(t,e={}){var n;!t||!ka()||(n=window.gtag)==null||n.call(window,"event",t,Ko(e))}function Sg(t,e){var o,r,i,s;if(!t||!ka())return;const n=fl(),a=(o=e==null?void 0:e.trim())!=null&&o.length?e.trim():void 0;(r=window.gtag)==null||r.call(window,"set","user_properties",Ko({user_key:t,nickname:a,device_type:n.type,device_os:n.os})),(i=window.gtag)==null||i.call(window,"event","user_identified",Ko({user_key:t,nickname:a,device_type:n.type,device_os:n.os})),(s=window.gtag)==null||s.call(window,"config",b_,Ko({send_page_view:!1,user_id:t}))}function x_(t){if(!t||!ka())return;const e=fl();gr=0,$r("session_start",{user_key:t,start_time:new Date().toISOString(),device_type:e.type})}function k_(t,e){if(!t||!ka())return;const n=fl(),a=Math.max(0,e),o=Number((a/3600).toFixed(3));$r("session_end",{user_key:t,duration_sec:a,learned_count:gr,learning_hours:o,device_type:n.type}),gr=0}function T_(t,e){!t||!e.wordId||!ka()||(gr+=1,$r("word_learned",{user_key:t,word_id:e.wordId,category:e.category,srs_state:e.srsState,srs_interval_days:e.srsIntervalDays}))}function S_(t,e){!t||!e.wordId||!ka()||$r("review_due",{user_key:t,word_id:e.wordId,category:e.category,srs_interval_days:e.srsIntervalDays})}var Mo={};const Da={total:0,learning:0,new:0,due:0,learned:0};function zo(t){return t?{total:t.learned+t.learning+t.remaining,learning:t.learning,new:t.new,due:t.due,learned:t.learned}:Da}const j_=()=>{const[t,e]=g.useState(null),[n,a]=g.useState("light"),[o]=g.useState(null),[r,i]=g.useState(null),[s,l]=g.useState([]),[c,h]=g.useState(Da),d=g.useRef(null),[u,m]=g.useState([]),[f,y]=g.useState([]),[w,x]=g.useState([]),[k,b]=g.useState(!0),S=g.useRef(new Set),j=g.useRef(null),A=g.useCallback(C=>{const O=d.current;return O==null?C:E(v({},C),{learned:O,total:O+C.learning+Math.max(C.total-C.learning-O,0)})},[]),P=g.useCallback(C=>T(void 0,null,function*(){const O=C!=null?C:t;if(O)try{const _=yield kg(O);h(A(zo(_)))}catch(_){console.warn("[useLearningProgress] Failed to load progress summary",_),h(A(Da))}}),[A,t]),I=g.useCallback(C=>T(void 0,null,function*(){const O=C!=null?C:t;if(O)try{const{learnedWords:_,newTodayWords:q,dueTodayWords:$,summary:z}=yield Tg(O);d.current=_.length,m(_),y(q),x($),h(A(zo(z)))}catch(_){console.warn("[useLearningProgress] Failed to load learned words",_),m([]),y([]),x([])}}),[A,t]);g.useEffect(()=>{if(!t||j.current===t)return;j.current=t;const C=Qa();Sg(t,C)},[t]),g.useEffect(()=>{let C=!0;const O=q=>{if(!C)return;const $=q.detail,z=typeof($==null?void 0:$.userKey)=="string"&&$.userKey.trim().length?$.userKey:null;if(z){if(z===t)return;d.current=null,i(null),l([]),m([]),y([]),x([]),h(A(Da)),b(!0),e(z);return}d.current=null,e(null),i(null),l([]),m([]),y([]),x([]),h(A(Da)),b(!1)};return typeof window!="undefined"&&window.addEventListener(Vi,O),T(void 0,null,function*(){try{const q=yield wg();if(!C)return;Mo.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[useLearningProgress] prepareUserSession resolved",{userKey:q}),q?e(q):b(!1)}catch(q){if(!C)return;console.warn("[useLearningProgress] prepareUserSession failed",q),b(!1)}}),()=>{C=!1,typeof window!="undefined"&&window.removeEventListener(Vi,O)}},[A,t]),g.useEffect(()=>{if(!t)return;let C=!0;return T(void 0,null,function*(){b(!0);try{yield rg();let _="light";try{const z=yield Iu(),X=z.daily_option||"light";_=X,z.daily_option||(yield Wi({daily_option:X}))}catch(z){}if(!C)return;a(_);const q=Na(_),$=Ha(_);try{const z=yield fg(t,q,$,o!=null?o:null);if(!C)return;i(z.selection),l(z.words),Mo.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[useLearningProgress] setTodayWords from init",{words:z.words.map(X=>({word_id:X.word_id,word:X.word,category:X.category}))})}catch(z){if(!C)return;console.warn("[useLearningProgress] Failed to load today's words",z),i(null),l([])}}catch(_){if(!C)return;console.warn("[useLearningProgress] Failed to initialize learning progress",_),i(null),l([])}finally{C&&b(!1)}yield P(t),C&&(yield I(t))}),()=>{C=!1}},[o,I,P,t]);const M=g.useCallback((C="light")=>T(void 0,null,function*(){if(t)try{const O=Na(C),_=Ha(C);b(!0);const q=yield to({userKey:t,mode:O,count:_,category:o!=null?o:null});a(C),i(q.selection),l(q.words),Mo.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[useLearningProgress] setTodayWords from generateDailyWords",{words:q.words.map($=>({word_id:$.word_id,word:$.word,category:$.category}))}),yield Wi({daily_option:C}),P(t)}catch(O){console.warn("[useLearningProgress] Failed to regenerate daily words",O)}finally{b(!1)}}),[o,t,P]),N=g.useCallback(()=>T(void 0,null,function*(){if(!t)return;const C=Na(n),O=Ha(n);try{b(!0);const _=yield to({userKey:t,mode:C,count:O,category:o!=null?o:null});i(_.selection),l(_.words),Mo.NEXT_PUBLIC_LAZYVOCA_DEBUG==="1"&&console.log("[useLearningProgress] setTodayWords from regenerateToday",{words:_.words.map(q=>({word_id:q.word_id,word:q.word,category:q.category}))}),P(t)}catch(_){console.warn("[useLearningProgress] Failed to regenerate today's selection",_)}finally{b(!1)}}),[o,P,n,t]),D=g.useCallback(C=>{const O=new Date().toISOString();l(_=>{const q=_.findIndex(z=>z.word===C);if(q===-1)return _;const $=[..._];return $[q]=E(v({},$[q]),{srs:E(v({},$[q].srs),{last_seen_at:O})}),$})},[]);g.useEffect(()=>{S.current.clear()},[r==null?void 0:r.date,t]),g.useEffect(()=>{if(!t)return;const C=S.current;s.forEach(O=>{var q,$,z;if(!O.is_due)return;const _=`${O.word_id}:${(q=O.nextAllowedTime)!=null?q:""}`;C.has(_)||(C.add(_),S_(t,{wordId:O.word_id,category:O.category,srsIntervalDays:(z=($=O.srs)==null?void 0:$.srs_interval_days)!=null?z:null}))})},[s,t]);const U=g.useCallback(()=>{var z,X,G,re,me,ie;if(!r)return null;const C=(z=r.timezone)!=null?z:null,O=(X=r.date)!=null?X:ha(new Date,C),_=(G=r.mode)!=null?G:Na(n),q=(re=r.count)!=null?re:Ha(n),$=(ie=(me=r.category)!=null?me:o)!=null?ie:null;return{date:O,mode:_,count:q,category:$,timezone:C,words:s,selection:E(v({},r),{date:O,mode:_,count:q,category:$,timezone:C})}},[o,r,n,s]),B=g.useCallback(C=>T(void 0,null,function*(){var q,$,z,X,G,re,me,ie;if(!t)return;const O=s.find(K=>K.word===C);if(!O)return;const _=U();if(_)try{const K=yield yg(t,O.word_id,n,_);i(K.selection),l(K.words),T_(t,{wordId:O.word_id,category:O.category,srsState:(X=(z=(q=K.payload)==null?void 0:q.srs_state)!=null?z:($=O.srs)==null?void 0:$.srs_state)!=null?X:null,srsIntervalDays:(ie=(me=(G=K.payload)==null?void 0:G.srs_interval_days)!=null?me:(re=O.srs)==null?void 0:re.srs_interval_days)!=null?ie:null}),K.learnedWords&&(d.current=K.learnedWords.length,m(K.learnedWords)),K.newTodayWords?y(K.newTodayWords):y([]),K.dueTodayWords?x(K.dueTodayWords):x([]),(!K.learnedWords||!K.newTodayWords||!K.dueTodayWords)&&I(t),K.summary?h(A(zo(K.summary))):P(t)}catch(K){console.warn("[useLearningProgress] Failed to mark word learned",K)}}),[A,U,I,P,n,s,t]),J=g.useCallback(C=>T(void 0,null,function*(){if(!t||!C)return!1;try{const O=yield vg(t,C);return O?(d.current=O.learnedWords.length,m(O.learnedWords),y(O.newTodayWords),x(O.dueTodayWords),h(A(zo(O.summary))),!0):(yield I(t),yield P(t),!1)}catch(O){return console.warn("[useLearningProgress] Failed to reset word",O),yield I(t),yield P(t),!1}}),[A,I,P,t]),V=g.useMemo(()=>ig(s),[s]);return g.useEffect(()=>{var O,_;if(typeof localStorage=="undefined")return;if(!r){try{localStorage.removeItem(sa),localStorage.removeItem(or),localStorage.removeItem(la),localStorage.removeItem(rr)}catch(q){console.warn("[useLearningProgress] Failed to clear today selection cache",q)}return}const C=(_=r.date)!=null?_:ha(new Date,(O=r.timezone)!=null?O:null);try{const q=JSON.stringify(r);localStorage.setItem(sa,q),localStorage.setItem(or,q),localStorage.setItem(la,JSON.stringify(V)),localStorage.setItem(Js,C),localStorage.setItem(rr,C)}catch(q){console.warn("[useLearningProgress] Failed to persist today selection cache",q)}},[r,V]),{dailySelection:r,progressStats:c,generateDailyWords:M,regenerateToday:N,markWordAsPlayed:D,refreshStats:P,refreshLearnedWords:I,learnedWords:u,newTodayLearnedWords:f,dueTodayLearnedWords:w,markWordLearned:B,markWordAsNew:J,todayWords:V,isDailySelectionLoading:k}},__=()=>p.jsx(Zh,{position:"top-center",richColors:!0,closeButton:!0}),E_=Sh,A_=Th,jg=g.forwardRef((a,n)=>{var o=a,{className:t}=o,e=H(o,["className"]);return p.jsx(cs,v({ref:n,className:Y("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},e))});jg.displayName=cs.displayName;const _g=g.forwardRef((o,a)=>{var r=o,{className:t,children:e}=r,n=H(r,["className","children"]);return p.jsxs(A_,{children:[p.jsx(jg,{}),p.jsxs(hs,E(v({ref:a,className:Y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},n),{children:[e,p.jsxs(ms,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(qh,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});_g.displayName=hs.displayName;const Eg=n=>{var a=n,{className:t}=a,e=H(a,["className"]);return p.jsx("div",v({className:Y("flex flex-col space-y-1.5 text-center sm:text-left",t)},e))};Eg.displayName="DialogHeader";const Ag=g.forwardRef((a,n)=>{var o=a,{className:t}=o,e=H(o,["className"]);return p.jsx(ds,v({ref:n,className:Y("text-lg font-semibold leading-none tracking-tight",t)},e))});Ag.displayName=ds.displayName;const C_=g.forwardRef((a,n)=>{var o=a,{className:t}=o,e=H(o,["className"]);return p.jsx(us,v({ref:n,className:Y("text-sm text-muted-foreground",t)},e))});C_.displayName=us.displayName;const Cg=g.forwardRef((o,a)=>{var r=o,{className:t,type:e}=r,n=H(r,["className","type"]);return p.jsx("input",v({type:e,className:Y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a},n))});Cg.displayName="Input";var I_=g.createContext(void 0);function P_(t){const e=g.useContext(I_);return t||e||"ltr"}function R_(t,[e,n]){return Math.min(n,Math.max(e,t))}function O_(t,e){return g.useReducer((n,a)=>{const o=e[n][a];return o!=null?o:n},t)}var wl="ScrollArea",[Ig,zE]=jn(wl),[N_,Be]=Ig(wl),Pg=g.forwardRef((t,e)=>{const D=t,{__scopeScrollArea:n,type:a="hover",dir:o,scrollHideDelay:r=600}=D,i=H(D,["__scopeScrollArea","type","dir","scrollHideDelay"]),[s,l]=g.useState(null),[c,h]=g.useState(null),[d,u]=g.useState(null),[m,f]=g.useState(null),[y,w]=g.useState(null),[x,k]=g.useState(0),[b,S]=g.useState(0),[j,A]=g.useState(!1),[P,I]=g.useState(!1),M=Ie(e,U=>l(U)),N=P_(o);return p.jsx(N_,{scope:n,type:a,dir:N,scrollHideDelay:r,scrollArea:s,viewport:c,onViewportChange:h,content:d,onContentChange:u,scrollbarX:m,onScrollbarXChange:f,scrollbarXEnabled:j,onScrollbarXEnabledChange:A,scrollbarY:y,onScrollbarYChange:w,scrollbarYEnabled:P,onScrollbarYEnabledChange:I,onCornerWidthChange:k,onCornerHeightChange:S,children:p.jsx(je.div,E(v({dir:N},i),{ref:M,style:v({position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":b+"px"},t.style)}))})});Pg.displayName=wl;var Rg="ScrollAreaViewport",Og=g.forwardRef((t,e)=>{const c=t,{__scopeScrollArea:n,children:a,nonce:o}=c,r=H(c,["__scopeScrollArea","children","nonce"]),i=Be(Rg,n),s=g.useRef(null),l=Ie(e,s,i.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),p.jsx(je.div,E(v({"data-radix-scroll-area-viewport":""},r),{ref:l,style:v({overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden"},t.style),children:p.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:a})}))]})});Og.displayName=Rg;var yt="ScrollAreaScrollbar",yl=g.forwardRef((t,e)=>{const l=t,{forceMount:n}=l,a=H(l,["forceMount"]),o=Be(yt,t.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:i}=o,s=t.orientation==="horizontal";return g.useEffect(()=>(s?r(!0):i(!0),()=>{s?r(!1):i(!1)}),[s,r,i]),o.type==="hover"?p.jsx(H_,E(v({},a),{ref:e,forceMount:n})):o.type==="scroll"?p.jsx(D_,E(v({},a),{ref:e,forceMount:n})):o.type==="auto"?p.jsx(Ng,E(v({},a),{ref:e,forceMount:n})):o.type==="always"?p.jsx(vl,E(v({},a),{ref:e})):null});yl.displayName=yt;var H_=g.forwardRef((t,e)=>{const s=t,{forceMount:n}=s,a=H(s,["forceMount"]),o=Be(yt,t.__scopeScrollArea),[r,i]=g.useState(!1);return g.useEffect(()=>{const l=o.scrollArea;let c=0;if(l){const h=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",h),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",h),l.removeEventListener("pointerleave",d)}}},[o.scrollArea,o.scrollHideDelay]),p.jsx(Xt,{present:n||r,children:p.jsx(Ng,E(v({"data-state":r?"visible":"hidden"},a),{ref:e}))})}),D_=g.forwardRef((t,e)=>{const c=t,{forceMount:n}=c,a=H(c,["forceMount"]),o=Be(yt,t.__scopeScrollArea),r=t.orientation==="horizontal",i=Fr(()=>l("SCROLL_END"),100),[s,l]=O_("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(s==="idle"){const h=window.setTimeout(()=>l("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(h)}},[s,o.scrollHideDelay,l]),g.useEffect(()=>{const h=o.viewport,d=r?"scrollLeft":"scrollTop";if(h){let u=h[d];const m=()=>{const f=h[d];u!==f&&(l("SCROLL"),i()),u=f};return h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,r,l,i]),p.jsx(Xt,{present:n||s!=="hidden",children:p.jsx(vl,E(v({"data-state":s==="hidden"?"hidden":"visible"},a),{ref:e,onPointerEnter:pe(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:pe(t.onPointerLeave,()=>l("POINTER_LEAVE"))}))})}),Ng=g.forwardRef((t,e)=>{const n=Be(yt,t.__scopeScrollArea),c=t,{forceMount:a}=c,o=H(c,["forceMount"]),[r,i]=g.useState(!1),s=t.orientation==="horizontal",l=Fr(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(s?h:d)}},10);return da(n.viewport,l),da(n.content,l),p.jsx(Xt,{present:a||r,children:p.jsx(vl,E(v({"data-state":r?"visible":"hidden"},o),{ref:e}))})}),vl=g.forwardRef((t,e)=>{const u=t,{orientation:n="vertical"}=u,a=H(u,["orientation"]),o=Be(yt,t.__scopeScrollArea),r=g.useRef(null),i=g.useRef(0),[s,l]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Mg(s.viewport,s.content),h=E(v({},a),{sizes:s,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:m=>r.current=m,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:m=>i.current=m});function d(m,f){return W_(m,i.current,s,f)}return n==="horizontal"?p.jsx(q_,E(v({},h),{ref:e,onThumbPositionChange:()=>{if(o.viewport&&r.current){const m=o.viewport.scrollLeft,f=Jc(m,s,o.dir);r.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollLeft=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollLeft=d(m,o.dir))}})):n==="vertical"?p.jsx(L_,E(v({},h),{ref:e,onThumbPositionChange:()=>{if(o.viewport&&r.current){const m=o.viewport.scrollTop,f=Jc(m,s);r.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{o.viewport&&(o.viewport.scrollTop=m)},onDragScroll:m=>{o.viewport&&(o.viewport.scrollTop=d(m))}})):null}),q_=g.forwardRef((t,e)=>{const h=t,{sizes:n,onSizesChange:a}=h,o=H(h,["sizes","onSizesChange"]),r=Be(yt,t.__scopeScrollArea),[i,s]=g.useState(),l=g.useRef(null),c=Ie(e,l,r.onScrollbarXChange);return g.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),p.jsx(Dg,E(v({"data-orientation":"horizontal"},o),{ref:c,sizes:n,style:v({bottom:0,left:r.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:r.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Wr(n)+"px"},t.style),onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(r.viewport){const m=r.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),$g(m,u)&&d.preventDefault()}},onResize:()=>{l.current&&r.viewport&&i&&a({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:fr(i.paddingLeft),paddingEnd:fr(i.paddingRight)}})}}))}),L_=g.forwardRef((t,e)=>{const h=t,{sizes:n,onSizesChange:a}=h,o=H(h,["sizes","onSizesChange"]),r=Be(yt,t.__scopeScrollArea),[i,s]=g.useState(),l=g.useRef(null),c=Ie(e,l,r.onScrollbarYChange);return g.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),p.jsx(Dg,E(v({"data-orientation":"vertical"},o),{ref:c,sizes:n,style:v({top:0,right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Wr(n)+"px"},t.style),onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(r.viewport){const m=r.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),$g(m,u)&&d.preventDefault()}},onResize:()=>{l.current&&r.viewport&&i&&a({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:fr(i.paddingTop),paddingEnd:fr(i.paddingBottom)}})}}))}),[M_,Hg]=Ig(yt),Dg=g.forwardRef((t,e)=>{const M=t,{__scopeScrollArea:n,sizes:a,hasThumb:o,onThumbChange:r,onThumbPointerUp:i,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:h,onResize:d}=M,u=H(M,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),m=Be(yt,n),[f,y]=g.useState(null),w=Ie(e,N=>y(N)),x=g.useRef(null),k=g.useRef(""),b=m.viewport,S=a.content-a.viewport,j=zt(h),A=zt(l),P=Fr(d,10);function I(N){if(x.current){const D=N.clientX-x.current.left,U=N.clientY-x.current.top;c({x:D,y:U})}}return g.useEffect(()=>{const N=D=>{const U=D.target;(f==null?void 0:f.contains(U))&&j(D,S)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[b,f,S,j]),g.useEffect(A,[a,A]),da(f,P),da(m.content,P),p.jsx(M_,{scope:n,scrollbar:f,hasThumb:o,onThumbChange:zt(r),onThumbPointerUp:zt(i),onThumbPositionChange:A,onThumbPointerDown:zt(s),children:p.jsx(je.div,E(v({},u),{ref:w,style:v({position:"absolute"},u.style),onPointerDown:pe(t.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),x.current=f.getBoundingClientRect(),k.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),I(N))}),onPointerMove:pe(t.onPointerMove,I),onPointerUp:pe(t.onPointerUp,N=>{const D=N.target;D.hasPointerCapture(N.pointerId)&&D.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=k.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})}))})}),pr="ScrollAreaThumb",qg=g.forwardRef((t,e)=>{const r=t,{forceMount:n}=r,a=H(r,["forceMount"]),o=Hg(pr,t.__scopeScrollArea);return p.jsx(Xt,{present:n||o.hasThumb,children:p.jsx(z_,v({ref:e},a))})}),z_=g.forwardRef((t,e)=>{const d=t,{__scopeScrollArea:n,style:a}=d,o=H(d,["__scopeScrollArea","style"]),r=Be(pr,n),i=Hg(pr,n),{onThumbPositionChange:s}=i,l=Ie(e,u=>i.onThumbChange(u)),c=g.useRef(void 0),h=Fr(()=>{c.current&&(c.current(),c.current=void 0)},100);return g.useEffect(()=>{const u=r.viewport;if(u){const m=()=>{if(h(),!c.current){const f=F_(u,s);c.current=f,s()}};return s(),u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,h,s]),p.jsx(je.div,E(v({"data-state":i.hasThumb?"visible":"hidden"},o),{ref:l,style:v({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},a),onPointerDownCapture:pe(t.onPointerDownCapture,u=>{const f=u.target.getBoundingClientRect(),y=u.clientX-f.left,w=u.clientY-f.top;i.onThumbPointerDown({x:y,y:w})}),onPointerUp:pe(t.onPointerUp,i.onThumbPointerUp)}))});qg.displayName=pr;var bl="ScrollAreaCorner",Lg=g.forwardRef((t,e)=>{const n=Be(bl,t.__scopeScrollArea),a=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&a?p.jsx($_,E(v({},t),{ref:e})):null});Lg.displayName=bl;var $_=g.forwardRef((t,e)=>{const h=t,{__scopeScrollArea:n}=h,a=H(h,["__scopeScrollArea"]),o=Be(bl,n),[r,i]=g.useState(0),[s,l]=g.useState(0),c=!!(r&&s);return da(o.scrollbarX,()=>{var u;const d=((u=o.scrollbarX)==null?void 0:u.offsetHeight)||0;o.onCornerHeightChange(d),l(d)}),da(o.scrollbarY,()=>{var u;const d=((u=o.scrollbarY)==null?void 0:u.offsetWidth)||0;o.onCornerWidthChange(d),i(d)}),c?p.jsx(je.div,E(v({},a),{ref:e,style:v({width:r,height:s,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0},t.style)})):null});function fr(t){return t?parseInt(t,10):0}function Mg(t,e){const n=t/e;return isNaN(n)?0:n}function Wr(t){const e=Mg(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=(t.scrollbar.size-n)*e;return Math.max(a,18)}function W_(t,e,n,a="ltr"){const o=Wr(n),r=o/2,i=e||r,s=o-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,h=n.content-n.viewport,d=a==="ltr"?[0,h]:[h*-1,0];return zg([l,c],d)(t)}function Jc(t,e,n="ltr"){const a=Wr(e),o=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=e.scrollbar.size-o,i=e.content-e.viewport,s=r-a,l=n==="ltr"?[0,i]:[i*-1,0],c=R_(t,l);return zg([0,i],[0,s])(c)}function zg(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const a=(e[1]-e[0])/(t[1]-t[0]);return e[0]+a*(n-t[0])}}function $g(t,e){return t>0&&t<e}var F_=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},a=0;return function o(){const r={left:t.scrollLeft,top:t.scrollTop},i=n.left!==r.left,s=n.top!==r.top;(i||s)&&e(),n=r,a=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(a)};function Fr(t,e){const n=zt(t),a=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(a.current),[]),g.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(n,e)},[n,e])}function da(t,e){const n=zt(e);Ua(()=>{let a=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(a),o.unobserve(t)}}},[t,n])}var Wg=Pg,U_=Og,B_=Lg;const Fg=g.forwardRef((o,a)=>{var r=o,{className:t,children:e}=r,n=H(r,["className","children"]);return p.jsxs(Wg,E(v({ref:a,className:Y("relative overflow-hidden",t)},n),{children:[p.jsx(U_,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(Ug,{}),p.jsx(B_,{})]}))});Fg.displayName=Wg.displayName;const Ug=g.forwardRef((o,a)=>{var r=o,{className:t,orientation:e="vertical"}=r,n=H(r,["className","orientation"]);return p.jsx(yl,E(v({ref:a,orientation:e,className:Y("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t)},n),{children:p.jsx(qg,{className:"relative flex-1 rounded-full bg-border"})}))});Ug.displayName=yl.displayName;const V_=({word:t,meaning:e,example:n,translation:a,backgroundColor:o,isMuted:r,isPaused:i,onToggleMute:s,onTogglePause:l,onCycleVoice:c,onNextWord:h,isSpeaking:d=!1,category:u,selectedVoice:m,nextVoiceLabel:f,searchPreview:y=!1})=>{g.useEffect(()=>(t&&localStorage.setItem("currentDisplayedWord",t),()=>{localStorage.removeItem("currentDisplayedWord")}),[t]);const w=t.split(/\s*\(([^)]+)\)/);w[0].trim(),w.length>1&&`${w[1]}`,w.length>2&&w.slice(2).join(" ").trim();const{main:x,annotations:k}=uu(t),b=(I,M,N)=>{typeof window!="undefined"&&typeof window.gtag=="function"&&window.gtag("event",I,{event_category:"interaction",event_label:M})},S=()=>{b(r?"unmute":"mute",r?"Unmute":"Mute"),s()},j=()=>{b(i?"play":"pause",i?"Play":"Pause"),l()},A=()=>{b("next_word","Next"),h()},P=()=>{b("cycle_voice",f),c()};return p.jsx(Hs,{className:Y("w-full max-w-xl mx-auto border-0 shadow-lg"),style:{backgroundColor:o},children:p.jsxs(Ds,{className:"p-2 sm:p-4",children:[p.jsxs("div",{children:[p.jsxs("h2",{className:"text-left font-semibold text-base md:text-sm text-gray-800 leading-tight mb-2",style:{marginTop:0},children:[x,k.map((I,M)=>p.jsx("span",{className:"ml-1 text-xs text-gray-500",children:I},M))]}),p.jsxs("div",{className:"text-left text-base md:text-sm text-emerald-400 italic mb-2",style:{background:"transparent",marginTop:0,whiteSpace:"pre-line"},children:[p.jsx("span",{className:"italic text-emerald-400",children:"*"})," ",e]}),p.jsxs("div",{className:"text-left text-base md:text-sm text-red-600 italic",style:{background:"transparent",marginTop:0,whiteSpace:"pre-line"},children:[p.jsx("span",{className:"italic text-red-600",children:"*"})," ",n]}),a&&p.jsx("div",{style:{fontStyle:"italic",fontSize:"0.9em",textAlign:"left",whiteSpace:"pre-line"},children:p.jsxs("em",{children:["* ",a]})}),!y&&p.jsx("div",{className:"mobile-note text-left italic mt-2",style:{color:"var(--lv-helper-text)",fontSize:"0.8rem"},children:p.jsx("p",{children:"⭐ Speech won’t autoplay due to security. Sometimes, tap anywhere or any button (e.g. Next) to enable it."})})]}),!y&&p.jsxs("div",{className:"flex flex-wrap gap-1 pt-1",children:[p.jsxs(Ce,{variant:"outline",size:"sm",onClick:S,className:Y("h-6 text-xs px-1.5",r?"text-purple-700 border-purple-300 bg-purple-50":"text-gray-700"),children:[r?p.jsx(Dh,{size:12,className:"mr-1"}):p.jsx(Hh,{size:12,className:"mr-1"}),r?"Unmute":"Mute"]}),p.jsxs(Ce,{variant:"outline",size:"sm",onClick:j,className:Y("h-6 text-xs px-1.5",i?"text-orange-500 border-orange-300 bg-orange-50":"text-gray-700"),children:[i?p.jsx(Rh,{size:12,className:"mr-1"}):p.jsx(Ph,{size:12,className:"mr-1"}),i?"Play":"Pause"]}),p.jsxs(Ce,{variant:"outline",size:"sm",onClick:A,className:Y("h-6 text-xs px-1.5 text-indigo-700 bg-indigo-50 border border-indigo-200 hover:bg-indigo-100/80","dark:text-indigo-200 dark:bg-indigo-900/40 dark:border-indigo-700 dark:hover:bg-indigo-900/60"),children:[p.jsx(Nh,{size:12,className:"mr-1"}),"Next"]}),p.jsx(Ce,{variant:"outline",size:"sm",onClick:P,className:Y("h-6 text-xs px-1.5 text-blue-700 border border-blue-200 bg-blue-50 hover:bg-blue-100/80","dark:text-blue-200 dark:bg-blue-900/40 dark:border-blue-700 dark:hover:bg-blue-900/60"),children:f})]})]})})},G_=({isOpen:t,onClose:e,initialQuery:n=""})=>{var S;const[a,o]=g.useState(!1),[r,i]=g.useState(n),[s,l]=g.useState(n),[c,h]=g.useState([]),[d,u]=g.useState(null),[m,f]=g.useState(!1),y={label:"US",region:"US",gender:"female",index:0};g.useEffect(()=>{t&&(i(n),l(n),u(null),h([]),f(!1),o(!1))},[t,n]),g.useEffect(()=>{if(!t)return;const j=setTimeout(()=>l(r),400);return()=>clearTimeout(j)},[r,t]);const w=j=>{const A=r.trim();if(!A)return j;const P=I=>I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");try{const I=new RegExp(`(${P(A)})`,"ig"),M=j.split(I);return M.length===1?j:p.jsx(p.Fragment,{children:M.map((N,D)=>D%2===1?p.jsx("mark",{className:"bg-yellow-200",children:N},`${N}-${D}`):p.jsx(L.Fragment,{children:N},`${N}-${D}`))})}catch(I){return console.error("Failed to highlight search match",I),j}};g.useEffect(()=>{d&&u(null)},[r]),g.useEffect(()=>{if(!t)return;const A=s.trim();if(!A){h([]),u(null),o(!1),f(!1);return}let P=!1;return T(void 0,null,function*(){var M;o(!0),h([]),u(null),f(!1);try{const N=tn(),{data:D,error:U}=yield N.rpc("search_vocabulary",{p_query:A.toLowerCase()});if(P)return;if(U){console.error("Failed to fetch vocabulary search results",U),f(!0);return}const B=Array.isArray(D)?D:[];if(B.length===0){f(!0);return}h(B),u((M=B[0])!=null?M:null),f(!1)}catch(N){P||(console.error("Failed to fetch vocabulary search results",N),h([]),u(null),f(!0))}finally{P||o(!1)}}),()=>{P=!0}},[s,t]);const x=j=>{i(j)},k=j=>{if(j.key==="Enter"){j.preventDefault();return}(j.key===" "||j.key==="Spacebar"||j.code==="Space")&&j.stopPropagation()},b=()=>{i(""),l(""),h([]),u(null),f(!1),o(!1),e()};return p.jsx(E_,{open:t,onOpenChange:b,children:p.jsxs(_g,{className:"sm:max-w-md max-h-[90vh] top-[5%] sm:top-[10%] md:top-1/2 translate-y-0 md:translate-y-[-50%]",children:[p.jsx(Eg,{children:p.jsx(Ag,{children:"Quick Search"})}),p.jsxs("div",{className:"flex gap-2 items-center",children:[p.jsx(Cg,{placeholder:"Search word...",value:r,onChange:j=>x(j.target.value),onKeyDown:k}),p.jsx(Ce,{size:"icon",variant:"outline","aria-label":"Search",onClick:()=>l(r),children:p.jsx(Oh,{className:"h-4 w-4"})})]}),d?p.jsx("div",{className:"mt-3 space-y-2",children:p.jsx(V_,{word:d.word,meaning:d.meaning,example:d.example,translation:(S=d.translation)!=null?S:void 0,backgroundColor:"var(--lv-card-bg)",isMuted:!1,isPaused:!1,onToggleMute:()=>{},onTogglePause:()=>{},onCycleVoice:()=>{},onSwitchCategory:()=>{},onNextWord:()=>{},currentCategory:d.category||"",nextCategory:"",selectedVoice:y,nextVoiceLabel:"",searchPreview:!0})}):p.jsxs(p.Fragment,{children:[p.jsxs(Fg,{className:"h-40 mt-3 border rounded-md",children:[a&&p.jsx("div",{className:"flex justify-center py-4","aria-label":"loading",children:p.jsx(Up,{className:"h-4 w-4 animate-spin"})}),c.map(j=>p.jsxs("div",{className:"px-2 py-1 cursor-pointer hover:bg-accent flex justify-between",onClick:()=>u(j),children:[p.jsx("span",{className:"mr-2 flex-1",children:w(j.word)}),j.category&&p.jsx(qs,{variant:"secondary",className:"shrink-0",children:j.category})]},`${j.word}-${j.category}`))]}),m&&s.trim()&&!a&&p.jsx("div",{className:"mt-2",children:p.jsx("p",{className:"italic text-sm",style:{color:"var(--lv-helper-text)"},children:"No results found."})})]})]})})},K_=({isOpen:t,onClose:e,onConfirm:n,word:a})=>p.jsx(nm,{open:t,onOpenChange:e,children:p.jsxs(Fs,{children:[p.jsxs(Us,{children:[p.jsx(Vs,{children:"Mark as New"}),p.jsxs(Gs,{children:['Are you sure you want to mark "',a,'" as new?',p.jsx("br",{}),p.jsx("br",{}),"This word will re-enter your learning queue and appear in daily selections."]})]}),p.jsxs(Bs,{children:[p.jsx(Ys,{onClick:e,children:"Cancel"}),p.jsx(Ks,{onClick:n,children:"Mark as New"})]})]})});function Y_(t){try{typeof localStorage!="undefined"&&localStorage.setItem("progressSummary",JSON.stringify(t))}catch(e){console.warn("progressSummary:persistLocal",e)}}function J_(){if(typeof localStorage=="undefined")return null;try{const t=localStorage.getItem("progressSummary");if(!t)return null;const e=JSON.parse(t),n=o=>typeof o=="number"&&Number.isFinite(o)?o:null,a=o=>typeof o=="string"?o:null;return{learning_count:n(e.learning_count),learned_count:n(e.learned_count),learning_due_count:n(e.learning_due_count),remaining_count:n(e.remaining_count),learning_time:n(e.learning_time),learned_days:Array.isArray(e.learned_days)?e.learned_days.filter(o=>typeof o=="string"):null,updated_at:a(e.updated_at)}}catch(t){return console.warn("progressSummary:readLocal",t),null}}function xl(t){return T(this,null,function*(){var n,a,o,r,i,s,l,c;if(!t)return null;const e=J_();return e?{learning_count:(n=e.learning_count)!=null?n:0,learned_count:(a=e.learned_count)!=null?a:0,learning_due_count:(o=e.learning_due_count)!=null?o:0,remaining_count:(i=e.remaining_count)!=null?i:Math.max(Kt-((r=e.learned_count)!=null?r:0),0),learning_time:(s=e.learning_time)!=null?s:0,learned_days:(l=e.learned_days)!=null?l:null,updated_at:(c=e.updated_at)!=null?c:null}:{learning_count:0,learned_count:0,learning_due_count:0,remaining_count:Math.max(Kt,0),learning_time:0,learned_days:[],updated_at:null}})}function wr(t){if(!Array.isArray(t))return[];const e=new Set;for(const n of t)typeof n=="string"&&n.trim().length===10&&e.add(n.trim());return Array.from(e).sort()}function Bg(t,e){return T(this,null,function*(){var r,i,s,l,c,h,d,u,m,f,y,w,x;if(!t)return;const n=yield xl(t),a=(i=(r=e.learned_count)!=null?r:n==null?void 0:n.learned_count)!=null?i:0,o={learning_count:(l=(s=e.learning_count)!=null?s:n==null?void 0:n.learning_count)!=null?l:0,learned_count:a,learning_due_count:(h=(c=e.learning_due_count)!=null?c:n==null?void 0:n.learning_due_count)!=null?h:0,remaining_count:(u=(d=e.remaining_count)!=null?d:n==null?void 0:n.remaining_count)!=null?u:Math.max(Kt-a,0),learning_time:(f=(m=e.learning_time)!=null?m:n==null?void 0:n.learning_time)!=null?f:0,learned_days:e.learned_days?wr(e.learned_days):wr((y=n==null?void 0:n.learned_days)!=null?y:[]),updated_at:(x=(w=e.updated_at)!=null?w:n==null?void 0:n.updated_at)!=null?x:null};Y_(o)})}function X_(t,e,n){return T(this,null,function*(){var s;if(!t)return;const a=typeof e=="string"?e.slice(0,10):"";if(!a)return;const o=yield xl(t),r=wr((s=o==null?void 0:o.learned_days)!=null?s:[]),i=Math.max(0,n)/36e5;i>0&&!r.includes(a)&&(r.push(a),r.sort()),yield Bg(t,{learning_time:i,learned_days:r})})}function Q_(t,e){return T(this,null,function*(){var r;if(!t)return;const n=typeof e=="string"?e.slice(0,10):"";if(!n)return;const a=yield xl(t),o=wr((r=a==null?void 0:a.learned_days)!=null?r:[]);o.includes(n)||(o.push(n),o.sort(),yield Bg(t,{learned_days:o}))})}function Xc(){return new Date().toISOString().slice(0,10)}function Qc(t){try{return Number(localStorage.getItem(`dailyTime_${t}`)||"0")}catch(e){return 0}}function Zc(t,e){try{localStorage.setItem(`dailyTime_${t}`,String(Math.max(0,Math.floor(e))))}catch(n){}}function vi(t,e,n){return T(this,null,function*(){const a=e.slice(0,10);if(!a)return;t.current||(t.current=yield xa());const o=t.current;if(o)try{yield X_(o,a,n)}catch(r){console.warn("[useDailyUsageTracker] Failed to persist learning time",r)}})}function eh(t,e){return T(this,null,function*(){const n=e.slice(0,10);if(!n)return;t.current||(t.current=yield xa());const a=t.current;if(a)try{yield Q_(a,n)}catch(o){console.warn("[useDailyUsageTracker] Failed to ensure learned day",o)}})}function Vg(){const t=g.useRef(null),e=g.useRef(Xc()),n=g.useRef(Qc(e.current)),a=g.useRef(n.current),o=g.useRef(!1),r=g.useRef(null);g.useEffect(()=>{const i=()=>{if(t.current==null)return;const f=performance.now(),y=f-t.current;n.current+=y,t.current=document.visibilityState==="visible"?f:null},s=()=>{Zc(e.current,n.current),vi(r,e.current,n.current)},l=()=>{if(!o.current)return;const f=r.current;if(!f)return;const y=Math.max(n.current-a.current,0),w=Math.round(y/1e3);k_(f,w),a.current=n.current,o.current=!1},c=()=>{const f=r.current;!f||o.current||(a.current=n.current,x_(f),o.current=!0)};T(this,null,function*(){yield eh(r,e.current),yield vi(r,e.current,n.current),c()});const h=()=>{if(document.visibilityState==="visible"){t.current=performance.now(),c();return}i(),s(),l()},d=()=>{if(document.visibilityState!=="visible")return;const f=Xc();if(f!==e.current){i(),s(),l(),e.current=f,n.current=Qc(f),a.current=n.current,t.current=performance.now(),eh(r,f),vi(r,f,n.current),c();return}if(t.current==null){t.current=performance.now();return}const y=performance.now(),w=y-t.current;t.current=y,n.current+=w,n.current%15e3<w&&Zc(e.current,n.current)},u=window.setInterval(d,5e3);document.addEventListener("visibilitychange",h);const m=()=>{i(),s(),l()};return window.addEventListener("pagehide",m),window.addEventListener("beforeunload",m),h(),d(),()=>{window.clearInterval(u),document.removeEventListener("visibilitychange",h),window.removeEventListener("pagehide",m),window.removeEventListener("beforeunload",m)}},[])}const Z_=()=>{var O;Vg();const[t,e]=g.useState(!0),[n,a]=g.useState(!1),[o,r]=g.useState(null),[i,s]=g.useState(!1),[l,c]=g.useState(""),{dailySelection:h,progressStats:d,generateDailyWords:u,markWordAsPlayed:m,markWordLearned:f,markWordAsNew:y,todayWords:w,learnedWords:x,newTodayLearnedWords:k,dueTodayLearnedWords:b,isDailySelectionLoading:S}=j_(),[j,A]=g.useState(!1);g.useEffect(()=>{var $;j||S||w.length>0||h!=null&&h.totalCount||hg()||!(typeof window!="undefined"&&($=window.localStorage)!=null&&$.getItem("lazyVoca.userKey"))||(A(!0),u("light"))},[h==null?void 0:h.totalCount,j,u,S,w.length]);const P=g.useRef(null);g.useEffect(()=>{P.current=ut.getCurrentWord();const _=()=>{P.current&&m(P.current.word),P.current=ut.getCurrentWord()};return ut.addVocabularyChangeListener(_),()=>{ut.removeVocabularyChangeListener(_)}},[m]);const I=Array.isArray(x)?x:[],M=Array.isArray(k)?k:[],N=Array.isArray(b)?b:[],D=M.length>0||N.length>0||I.length>0,U=_=>typeof _!="number"||!Number.isFinite(_)?"—":`${Math.max(0,Math.trunc(_))}`,B=_=>{if(!_)return"—";const q=typeof _=="string"?_.trim():"";if(!q)return"—";if(q.length>=10)return q.slice(0,10);const $=Date.parse(q);return Number.isNaN($)?q:new Date($).toISOString().slice(0,10)};g.useEffect(()=>{h&&e(!0)},[h]);const J=_=>{const q=_!=null?_:"";if(_&&!_.trim()){Fe.warning("Please enter a valid search query.");return}c(q),s(!0)},V=()=>T(void 0,null,function*(){var _;if(o){const q=((_=o.category)!=null?_:"").trim(),$=q?`${o.word}::${q}`:o.word;(yield y($))?Fe.success("Moved back to Learning!"):Fe.error("Unable to move word back to learning. Please try again.")}a(!1),r(null)}),C=p.jsx(_s,{children:p.jsxs("div",{className:"space-y-4 mt-4",children:[p.jsx(Z0,{progressStats:d,learnerId:"default"}),p.jsxs(bm,{open:t,onOpenChange:e,children:[p.jsxs(By,{children:[p.jsx(Vy,{asChild:!0,children:p.jsxs(xm,{className:"flex items-center gap-2",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Word Summary"}),p.jsx("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:"Tap to show or hide details"}),p.jsx(Ih,{className:Y("h-4 w-4 transition-transform",t&&"rotate-180")})]})}),p.jsx(Pd,{side:"top",children:"Click to expand or collapse the word summary."})]}),p.jsxs(km,{className:"space-y-4",children:[!D&&p.jsx("div",{className:"text-sm text-gray-500 italic",children:"No daily selection available yet."}),p.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("h4",{className:"font-medium text-green-600",children:["NEW TODAY (",M.length,")"]}),p.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:M.length>0?M.map((_,q)=>p.jsxs("div",{className:"text-sm p-2 rounded border border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/40",children:[p.jsx("div",{className:"font-semibold text-green-900 dark:text-green-100",children:_.word}),p.jsxs("div",{className:"space-y-0.5",children:[p.jsxs("div",{className:"text-xs text-green-700 dark:text-green-200",children:["Review #",U(_.reviewCount)]}),p.jsxs("div",{className:"text-xs text-green-700 dark:text-green-200",children:["Next review: ",B(_.nextReviewAt)]})]})]},`${_.word}-${q}`)):p.jsx("div",{className:"text-sm p-2 rounded border border-green-200 bg-green-50 text-green-800 italic dark:border-green-800 dark:bg-green-900/40 dark:text-green-100",children:"No new words assigned today"})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("h4",{className:"font-medium text-red-600",children:["DUE TODAY (",N.length,")"]}),p.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:N.length>0?N.map((_,q)=>p.jsxs("div",{className:"text-sm p-2 rounded border border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/40",children:[p.jsx("div",{className:"font-semibold text-red-900 dark:text-red-100",children:_.word}),p.jsxs("div",{className:"space-y-0.5",children:[p.jsxs("div",{className:"text-xs text-red-700 dark:text-red-200",children:["Review #",U(_.reviewCount)]}),p.jsxs("div",{className:"text-xs text-red-700 dark:text-red-200",children:["Next review: ",B(_.nextReviewAt)]})]})]},`${_.word}-${q}`)):p.jsx("div",{className:"text-sm p-2 rounded border border-red-200 bg-red-50 text-red-800 italic dark:border-red-800 dark:bg-red-900/40 dark:text-red-100",children:"No due reviews today"})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("h4",{className:"font-medium text-gray-600",children:["LEARNED (",I.length,")"]}),p.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:I.length>0?I.map((_,q)=>p.jsxs("div",{className:"text-sm p-2 rounded border border-slate-200 bg-slate-100 flex items-center justify-between dark:border-slate-700 dark:bg-slate-900/40",children:[p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:_.word}),p.jsx("div",{className:"space-y-0.5",children:p.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-200",children:["Learned ",B(_.learnedDate)]})})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{"aria-label":"View Word",className:"text-slate-500 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-100",onClick:()=>J(_.word),children:p.jsx(Lp,{className:"h-4 w-4"})}),p.jsx("button",{"aria-label":"Mark as New",className:"text-slate-500 hover:text-slate-700 dark:text-slate-300 dark:hover:text-slate-100",onClick:()=>{r(_),a(!0)},children:p.jsx(Kp,{className:"h-4 w-4"})})]})]},q)):p.jsx("div",{className:"text-sm p-2 rounded border border-slate-200 bg-slate-100 text-slate-800 italic dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-100",children:"No learned words"})})]})]})]})]})]})});return p.jsxs(p.Fragment,{children:[p.jsx(__,{}),p.jsx("div",{className:"w-full max-w-6xl mx-auto p-4",children:p.jsx($0,{initialWords:w,dailySelection:h,isLoadingSelection:S,onMarkWordLearned:_=>{f(_)},additionalContent:C,onOpenSearch:J})}),p.jsx(K_,{isOpen:n,onClose:()=>a(!1),onConfirm:V,word:(O=o==null?void 0:o.word)!=null?O:""}),p.jsx(G_,{isOpen:i,initialQuery:l,onClose:()=>s(!1)})]})};function th(t){if(typeof t!="string")return null;const e=t.trim();return e.length?e:null}const eE=()=>{const[t,e]=g.useState(null);g.useEffect(()=>{if(typeof window=="undefined")return;const a=s=>{e(th(typeof s=="string"?s:Qa()))};a(Qa());let o=!1;T(void 0,null,function*(){var s,l,c,h,d,u;try{const m=yield Hr();if(o)return;const f=(u=(d=(h=(l=(s=m==null?void 0:m.user)==null?void 0:s.name)!=null?l:m==null?void 0:m.name)!=null?h:(c=m==null?void 0:m.user)==null?void 0:c.nickname)!=null?d:m==null?void 0:m.nickname)!=null?u:null;f&&a(f)}catch(m){console.warn("UserGreeting:activeSession",m)}});const r=s=>{var l;s.key&&s.key!==bn||a((l=s.newValue)!=null?l:null)},i=s=>{var c;const l=s.detail;a((c=l==null?void 0:l.nickname)!=null?c:null)};return window.addEventListener("storage",r),window.addEventListener(Za,i),()=>{o=!0,window.removeEventListener("storage",r),window.removeEventListener(Za,i)}},[]);const n=g.useCallback(a=>{a.preventDefault(),Cm();try{localStorage.removeItem(bn)}catch(o){}ol(null),e(null),Fe.success("Signed out successfully.")},[]);return t?p.jsxs("p",{className:"mt-2 text-center text-sm text-muted-foreground",children:["Hello ",p.jsx("span",{className:"font-semibold text-foreground dark:text-foreground",children:t}),","," ",p.jsx("a",{href:"#sign-out",onClick:n,className:"font-medium text-blue-600 hover:text-blue-700 hover:underline",children:"Sign out"})]}):null},Gg=g.createContext(void 0),nh="lv-theme",ah="lv-dark",tE=({children:t})=>{const[e,n]=g.useState("default"),[a,o]=g.useState(!1);g.useEffect(()=>{if(typeof window=="undefined")return;const s=localStorage.getItem(nh);(s==="playful"||s==="classic"||s==="default")&&n(s);const l=localStorage.getItem(ah);if(l!==null){o(l==="true");return}const c=window.matchMedia("(prefers-color-scheme: dark)").matches;o(c)},[]),g.useEffect(()=>{if(typeof window=="undefined")return;const s=`${e}${a?"-dark":""}`;document.documentElement.setAttribute("data-theme",s),document.documentElement.classList.toggle("dark",a),document.documentElement.style.colorScheme=a?"dark":"light",localStorage.setItem(nh,e),localStorage.setItem(ah,String(a))},[e,a]);const r=g.useCallback(()=>{o(s=>!s)},[]),i=g.useMemo(()=>({theme:e,setTheme:n,toggleDark:r,isDark:a}),[e,r,a]);return p.jsx(Gg.Provider,{value:i,children:t})},nE=()=>{const t=g.useContext(Gg);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},kl="user-theme",Fa="mint",Kg="theme-",Yg=["mint","morning","ocean","sakura","cyber","default","dark","light"],aE=Yg.map(t=>`${Kg}${t}`);function Tl(){return typeof window!="undefined"&&typeof document!="undefined"}function Sl(t){return Yg.includes(t)?t:Fa}function Jg(t){if(!Tl())return;const e=Sl(t),n=document.body.classList;n.remove(...aE),n.add(`${Kg}${e}`);try{window.localStorage.setItem(kl,e)}catch(a){console.warn("Unable to persist theme",a)}}function oh(){if(!Tl())return;let t=null;try{t=window.localStorage.getItem(kl)}catch(n){console.warn("Unable to read persisted theme",n)}const e=Sl(t!=null?t:Fa);Jg(e)}function bi(){if(!Tl())return Fa;try{const t=window.localStorage.getItem(kl);return Sl(t!=null?t:Fa)}catch(t){return console.warn("Unable to read persisted theme",t),Fa}}const oE=[{name:"mint",emoji:"🌿",label:"Mint Breeze"},{name:"morning",emoji:"☀️",label:"Morning Glow"},{name:"ocean",emoji:"🌊",label:"Ocean Depth"},{name:"sakura",emoji:"🌸",label:"Sakura Dream"},{name:"cyber",emoji:"🔮",label:"Cyber Night"}],rE=()=>{const{toggleDark:t,isDark:e}=nE(),[n,a]=g.useState(()=>bi());g.useEffect(()=>{a(bi());const i=s=>{s.key==="user-theme"&&a(bi())};return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[]);const o=i=>{Jg(i),a(i)},r=g.useMemo(()=>oE.map(i=>{const s=n===i.name;return p.jsx("button",{type:"button","data-theme":i.name,onClick:()=>o(i.name),className:`w-9 h-9 rounded-full border theme-border bg-[var(--lv-card-bg)] shadow-md flex items-center justify-center text-lg transition-transform duration-300 hover:scale-110 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--lv-accent)] ${s?"ring-2 ring-[var(--lv-accent)] scale-110":""}`,title:i.label,"aria-label":i.label,"aria-pressed":s,children:i.emoji},i.name)}),[n]);return p.jsxs("div",{className:"theme-switcher flex flex-wrap gap-2 items-center justify-center w-full text-sm",children:[r,p.jsx("button",{type:"button",onClick:t,className:"w-11 h-11 rounded-full border theme-border bg-[var(--lv-card-bg)] shadow-md flex items-center justify-center text-2xl transition-transform duration-300 hover:scale-110 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--lv-accent)]",title:"Toggle dark mode","aria-label":e?"Switch to light mode":"Switch to dark mode","aria-pressed":e,children:e?"🌙":"☀️"})]})},iE=()=>p.jsxs("div",{className:"min-h-screen py-4 transition-colors duration-300",children:[p.jsxs("header",{className:"relative mb-4 pt-6 sm:pt-2",children:[p.jsx("h1",{className:"text-xl font-bold text-center",style:{color:"var(--lv-heading)"},children:"Lazy Vocabulary"}),p.jsx("h2",{className:"text-center mt-1 text-sm font-medium",style:{color:"var(--lv-subheading)"},children:"Master vocabulary with passive learning!"}),p.jsx("p",{className:"slogan-note",children:"Just skim the word and speak it—let it stick naturally!"})]}),p.jsx("main",{className:"container mx-auto px-2",children:p.jsx(Z_,{})}),p.jsxs("footer",{className:"mt-6 text-center text-sm",style:{color:"var(--lv-text-secondary)"},children:[p.jsx(eE,{}),p.jsx("div",{className:"mt-3 flex justify-center",children:p.jsx(rE,{})}),p.jsx("p",{className:"mt-2",children:"© 2025 Lazy Vocabulary - hoctusach@gmail.com"})]})]}),sE=()=>{const t=Qt();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),p.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),p.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},lE=()=>{const t=typeof window!="undefined";g.useEffect(()=>{if(!t)return;const e=()=>{};return window.addEventListener("beforeunload",e),document.addEventListener("visibilitychange",e),()=>{window.removeEventListener("beforeunload",e),document.removeEventListener("visibilitychange",e)}},[t])},cE=/[<>"'`$(){}\u005B\u005D;]/g;function hE(t){return t.replace(cE,"").trim()}function dE(t){return t==="light"||t==="moderate"||t==="intense"}const uE="4-10 digits; numbers only.";function mE(t){const e=t.trim();return e.length<4?"Passcode must be at least 4 digits.":e.length>10?"Passcode must be at most 10 digits.":/^\d+$/.test(e)?null:"Passcode can only contain numbers."}function gE(){const[t,e]=g.useState({ready:!1,show:!1,nickname:"",passcode:"",pending:!1,mode:"signin"}),n=g.useRef(null);if(g.useEffect(()=>{const c=Qa(),h=Gi(),d=!!c,u=!!h;e(w=>E(v({},w),{ready:!0,show:!(d&&u),nickname:"",passcode:"",mode:"signin"}));function m(w){const x=w&&"nickname"in w?!!w.nickname:!!Qa(),k=w&&"passcode"in w?!!w.passcode:!!Gi();e(b=>E(v({},b),{show:!(x&&k)}))}function f(w){if(!w.key){m();return}w.key===bn?m({nickname:w.newValue}):w.key===cr&&m({passcode:w.newValue})}function y(w){var k;const x=w.detail;m({nickname:(k=x==null?void 0:x.nickname)!=null?k:null})}return window.addEventListener("storage",f),window.addEventListener(Za,y),()=>{window.removeEventListener("storage",f),window.removeEventListener(Za,y)}},[]),!t.ready||!t.show)return null;const a=c=>T(this,null,function*(){if(c.preventDefault(),t.pending)return;const h=t.nickname.trim(),d=t.passcode.trim(),u=uT(h);if(u){e(b=>E(v({},b),{error:u,info:void 0}));return}const m=mE(d);if(m){e(b=>E(v({},b),{error:m,info:void 0}));return}e(b=>E(v({},b),{pending:!0,error:void 0,info:void 0}));const f=hE(h),y=d.trim(),w=t.mode==="create",x=b=>{const S=typeof(b==null?void 0:b.code)=="string"?b.code:void 0;return S==="NICKNAME_NOT_FOUND"?(e(j=>E(v({},j),{pending:!1,show:!0,mode:"create",nickname:f,passcode:y,info:"We couldn’t find this nickname. Create a profile to continue.",error:void 0})),!0):S==="INCORRECT_PASSCODE"?(e(j=>E(v({},j),{pending:!1,show:!0,mode:"signin",passcode:"",error:"Incorrect passcode. Try again.",info:void 0})),setTimeout(()=>{var j;return(j=n.current)==null?void 0:j.focus()},0),!0):!1},k=b=>T(this,null,function*(){var N,D,U,B,J,V;const S=b==null?void 0:b.nicknameHint,j=(N=b==null?void 0:b.blockUntilReady)!=null?N:!1,A=yield jm(f,y);Em(A),_T(y);const P=(B=(U=(D=typeof(A==null?void 0:A.name)=="string"&&A.name.trim().length?A.name:void 0)!=null?D:typeof(A==null?void 0:A.nickname)=="string"&&A.nickname.trim().length?A.nickname:void 0)!=null?U:S&&S.trim().length?S:void 0)!=null?B:f;Fe.success(`Signed in as ${P}`),localStorage.setItem(bn,P),ol(P);let I=null;try{I=yield xa()}catch(C){console.error("AuthGate:ensureUserKey",C)}let M=null;I&&(Sg(I,P),M=T(this,null,function*(){try{const[{getPreferences:C},O]=yield Promise.all([dt(()=>import("./preferences-CI6QDr5V.js"),__vite__mapDeps([0,1,2])),dt(()=>Promise.resolve().then(()=>w_),void 0)]),_=yield C(),q=dE(_==null?void 0:_.daily_option)?_.daily_option:"light",$=O.getModeForSeverity(q),z=O.getCountForSeverity(q);yield O.fetchAndCommitTodaySelection({userKey:I,mode:$,count:z,category:null})}catch(C){throw console.error("AuthGate:prepareTodaySelection",C),Fe.error("Failed to prepare today's words. Please refresh if they don't load."),C}}));try{(yield dt(()=>Promise.resolve().then(()=>wE),void 0)).autoBackfillOnReload()}catch(C){}try{(V=(J=yield dt(()=>T(this,null,function*(){const{migrateLocalVocabToDb:C}=yield import("./migrateLocalVocabToDb-B4BbOWdt.js");return{migrateLocalVocabToDb:C}}),[])).migrateLocalVocabToDb)==null||V.call(J)}catch(C){}if(M)if(j)try{yield M}catch(C){}else M.catch(()=>{});e({ready:!0,show:!1,nickname:P,passcode:"",pending:!1,mode:"signin"})});if(w){let b;try{const S=yield sT(f,y);typeof(S==null?void 0:S.name)=="string"&&S.name.trim().length?b=S.name:b=typeof(S==null?void 0:S.nickname)=="string"&&S.nickname.trim().length?S.nickname:void 0}catch(S){if(console.error("AuthGate:createProfile",S),x(S))return;const j=typeof(S==null?void 0:S.message)=="string"?S.message:"",A=j.trim().length?j.trim():"Failed to save nickname",P=/409|taken|exists|NICKNAME_TAKEN/i.test(A);e(I=>E(v({},I),{pending:!1,error:P?"That nickname is already taken. Try another.":A,info:void 0,mode:"create"}));return}try{yield k({nicknameHint:b,blockUntilReady:!0});return}catch(S){if(console.error("AuthGate:signInAfterCreate",S),x(S))return;const j=typeof(S==null?void 0:S.message)=="string"?S.message:"",A=j.trim().length?j.trim():"Sign-in failed";e(P=>E(v({},P),{pending:!1,error:A,info:void 0,mode:"signin"}));return}}try{yield k()}catch(b){if(console.error("AuthGate:signIn",b),x(b))return;const S=typeof(b==null?void 0:b.message)=="string"?b.message:"",j=S.trim().length?S.trim():"Sign-in failed";e(A=>E(v({},A),{pending:!1,error:j,info:void 0,mode:"signin"}))}}),o="< > \" ' ` $ \\ { } | ;",r=t.mode==="create",i=t.pending?r?"Creating…":"Signing in…":r?"Create profile":"Sign in",s=r?"Pick a nickname and numeric passcode to create your profile. We will sign you in after saving it.":"Enter your nickname and passcode to sync progress across devices.",l=r?"Choose a 4-10 digit passcode. Numbers only.":uE;return p.jsx("div",{style:{position:"fixed",inset:0,background:"var(--lv-overlay)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:p.jsxs("form",{onSubmit:a,style:{width:360,padding:20,borderRadius:12,background:"var(--lv-card-bg)",boxShadow:"var(--lv-shadow)",fontFamily:"system-ui, sans-serif",position:"relative"},children:[p.jsx("h3",{style:{margin:0},children:r?"Create your profile":"Access your vocabulary"}),p.jsx("p",{style:{marginTop:6,color:"var(--lv-helper-text)",fontSize:14},children:s}),p.jsx("label",{style:{display:"block",marginTop:12,fontSize:13,fontWeight:600},children:"Nickname"}),p.jsx("input",{autoFocus:!0,value:t.nickname,onChange:c=>e(h=>E(v({},h),{nickname:c.target.value,error:void 0,info:h.mode==="signin"?void 0:h.info})),placeholder:"e.g., Mi mi U",maxLength:40,disabled:t.pending,style:{width:"100%",padding:"10px 12px",fontSize:14,borderRadius:8,border:"1px solid var(--lv-field-border)",background:"var(--lv-field-bg)",color:"var(--lv-field-text)"}}),p.jsxs("div",{style:{marginTop:4,fontSize:12,color:"var(--lv-helper-text)"},children:["Names match case-insensitively and ignore spaces. Allowed: most characters; blocked: ",o]}),p.jsx("label",{style:{display:"block",marginTop:12,fontSize:13,fontWeight:600},children:"Passcode"}),p.jsx("input",{type:"password",value:t.passcode,onChange:c=>e(h=>E(v({},h),{passcode:c.target.value,error:void 0})),placeholder:"Enter passcode",maxLength:10,disabled:t.pending,inputMode:"numeric",ref:n,style:{width:"100%",padding:"10px 12px",fontSize:14,borderRadius:8,border:"1px solid var(--lv-field-border)",background:"var(--lv-field-bg)",color:"var(--lv-field-text)",letterSpacing:3}}),p.jsx("div",{style:{marginTop:4,fontSize:12,color:"var(--lv-helper-text)"},children:l}),t.info&&p.jsx("div",{style:{marginTop:10,background:"var(--lv-card-tone-2)",color:"var(--lv-info)",padding:"8px 12px",borderRadius:8,fontSize:13},children:t.info}),t.error&&p.jsx("div",{style:{color:"var(--lv-error)",marginTop:8,fontSize:13},children:t.error}),p.jsx("button",{type:"submit",disabled:t.pending,style:{marginTop:12,width:"100%",padding:"10px 12px",borderRadius:8,border:"none",background:"var(--lv-button-primary-bg)",color:"var(--lv-button-primary-text)",fontWeight:600,cursor:t.pending?"default":"pointer"},children:i}),!r&&p.jsx("button",{type:"button",onClick:()=>e(c=>E(v({},c),{mode:"create",info:"Choose a nickname and 4-10 digit passcode. We will save it and sign you in automatically.",error:void 0})),disabled:t.pending,style:{marginTop:10,width:"100%",padding:"8px 12px",borderRadius:8,border:"1px solid var(--lv-field-border)",background:"var(--lv-button-secondary-bg)",color:"var(--lv-button-secondary-text)",fontSize:13,cursor:t.pending?"default":"pointer"},children:"Create a new profile"}),t.mode==="create"&&p.jsx("button",{type:"button",onClick:()=>e(c=>E(v({},c),{mode:"signin",info:void 0,error:void 0})),disabled:t.pending,style:{marginTop:10,width:"100%",padding:"8px 12px",borderRadius:8,border:"1px solid var(--lv-field-border)",background:"var(--lv-button-secondary-bg)",color:"var(--lv-button-secondary-text)",fontSize:13,cursor:t.pending?"default":"pointer"},children:"Already have a passcode? Sign in"}),p.jsxs("div",{style:{marginTop:8,fontSize:12,color:"var(--lv-helper-text)"},children:["Stored locally as “",bn,"”. You can update it later in Settings."]})]})})}function pE(){try{localStorage.removeItem("customWords");const t=[];for(let e=0;e<localStorage.length;e++){const n=localStorage.key(e);n&&(/^category:/i.test(n)||n==="customWords")&&t.push(n)}t.forEach(e=>localStorage.removeItem(e))}catch(t){}}function fE(){const t=["streakDays","usedStreakDays","badges","redeemableStreaks","stickers"];try{for(const e of t)localStorage.removeItem(e)}catch(e){}}const rh="__lazyVoca_backfill_warned__";function Xg(){return T(this,null,function*(){typeof window!="undefined"&&(window[rh]||(window[rh]=!0,console.warn("[sync:autoBackfillOnReload] Disabled because legacy tables were removed from the schema. Backfill now only happens when SRS data is synchronised directly via learned_words/user_progress_summary.")))})}const wE=Object.freeze(Object.defineProperty({__proto__:null,autoBackfillOnReload:Xg},Symbol.toStringTag,{value:"Module"})),yE=new pv,vE=()=>(g.useEffect(()=>{pE(),fE(),Xg()},[]),g.useEffect(()=>{rg()},[]),lE(),Vg(),p.jsx(wv,{client:yE,children:p.jsxs(_s,{children:[p.jsxs(Li,{children:[p.jsx("title",{children:"Lazy Vocabulary – Master English Vocabulary with Passive Learning"}),p.jsx("meta",{name:"description",content:"Learn English vocabulary easily. Passive learning with audio, examples, and categorized words. Improve fluency by skimming and listening."}),p.jsx("link",{rel:"canonical",href:"https://your-domain.com/"})]}),p.jsx(zf,{}),p.jsx(ww,{}),p.jsx(Wb,{children:p.jsxs(yb,{children:[p.jsx(Oi,{path:"/",element:p.jsx(iE,{})}),!1,p.jsx(Oi,{path:"*",element:p.jsx(sE,{})})]})}),p.jsx(gE,{})]})}));console.log=()=>{},console.warn=()=>{},console.info=()=>{};lT();typeof document!="undefined"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",oh,{once:!0}):oh());const Qg=document.getElementById("root");if(!Qg)throw new Error("Root element not found");_h(Qg).render(p.jsx(tE,{children:p.jsx(vE,{})}));export{Iu as g,Wi as s};
