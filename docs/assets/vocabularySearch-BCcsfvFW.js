var q=Object.defineProperty,x=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var m=(t,n,e)=>n in t?q(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,p=(t,n)=>{for(var e in n||(n={}))C.call(n,e)&&m(t,e,n[e]);if(y)for(var e of y(n))L.call(n,e)&&m(t,e,n[e]);return t},g=(t,n)=>x(t,z(n));import{D as W,n as k}from"./index-Diwna50V.js";import"./ui-BFstIHNx.js";import"./vendor-BCuAxY6N.js";let h=null;function j(){return h||(h=Object.entries(W).flatMap(([t,n])=>(n||[]).map(e=>g(p({},e),{category:t})))),h}function B(){const t=j();return console.info(`QuickSearch: loaded ${t.length} words`),t}let f=null;const D=()=>f||(f=B().map(n=>{const e=k(n.word).toLowerCase(),r=e.split(/\s+/).filter(Boolean),o=typeof n.count=="number"?n.count:parseInt(String(n.count),10)||0;return{word:n,normalizedKey:e,tokens:r,frequency:o}}),f),I=(t,n)=>{const e=Array.from({length:t.length+1},()=>[]);for(let r=0;r<=t.length;r++)e[r][0]=r;for(let r=0;r<=n.length;r++)e[0][r]=r;for(let r=1;r<=t.length;r++)for(let o=1;o<=n.length;o++)t[r-1]===n[o-1]?e[r][o]=e[r-1][o-1]:e[r][o]=Math.min(e[r-1][o]+1,e[r][o-1]+1,e[r-1][o-1]+1);return e[t.length][n.length]},K=(t,n=20)=>{const e=k(t).toLowerCase();if(!e)return[];const r=D(),o=e.split(/\s+/).filter(Boolean),i=[];for(const s of r){const{normalizedKey:l,tokens:w}=s;let c=0;if(l===e)c=100;else if(l.startsWith(e))c=80;else if(` ${l} `.includes(` ${e} `))c=65;else if(o.every(d=>w.includes(d)))c=50;else{const d=I(l,e),A=o.length>1?2:1;d<=A&&(c=30)}c>0&&i.push({entry:s,rank:c})}i.sort((s,l)=>l.rank!==s.rank?l.rank-s.rank:l.entry.frequency!==s.entry.frequency?l.entry.frequency-s.entry.frequency:s.entry.word.word.localeCompare(l.entry.word.word));const u=i.find(s=>s.rank===100),a=i.slice(0,n);return u&&!a.includes(u)&&(a.pop(),a.push(u)),a.map(s=>s.entry.word)};export{K as default,D as loadVocabularyIndex,K as searchVocabulary};
